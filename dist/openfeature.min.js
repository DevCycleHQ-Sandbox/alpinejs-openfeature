(()=>{var El=Object.create;var Mt=Object.defineProperty;var _l=Object.getOwnPropertyDescriptor;var xl=Object.getOwnPropertyNames;var wl=Object.getPrototypeOf,Sl=Object.prototype.hasOwnProperty;var m=(t,e)=>()=>(t&&(e=t(t=0)),e);var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Al=(t,e)=>{for(var r in e)Mt(t,r,{get:e[r],enumerable:!0})},Xr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xl(e))!Sl.call(t,i)&&i!==r&&Mt(t,i,{get:()=>e[i],enumerable:!(n=_l(e,i))||n.enumerable});return t};var le=(t,e,r)=>(r=t!=null?El(wl(t)):{},Xr(e||!t||!t.__esModule?Mt(r,"default",{value:t,enumerable:!0}):r,t)),Il=t=>Xr(Mt({},"__esModule",{value:!0}),t);var _e=k((kp,_n)=>{"use strict";var ur=Object.defineProperty,Nl=Object.getOwnPropertyDescriptor,Cl=Object.getOwnPropertyNames,Ol=Object.prototype.hasOwnProperty,Ml=(t,e)=>{for(var r in e)ur(t,r,{get:e[r],enumerable:!0})},Rl=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Cl(e))!Ol.call(t,i)&&i!==r&&ur(t,i,{get:()=>e[i],enumerable:!(n=Nl(e,i))||n.enumerable});return t},Tl=t=>Rl(ur({},"__esModule",{value:!0}),t),tn={};Ml(tn,{AllProviderEvents:()=>ut,AllProviderStatus:()=>or,ClientProviderEvents:()=>ut,ClientProviderStatus:()=>or,DefaultLogger:()=>lr,ErrorCode:()=>nn,FlagNotFoundError:()=>Dl,GeneralError:()=>on,GenericEventEmitter:()=>$l,InvalidContextError:()=>Bl,LOG_LEVELS:()=>gn,OpenFeatureCommonAPI:()=>jl,OpenFeatureError:()=>Ee,ParseError:()=>Vl,ProviderFatalError:()=>Ul,ProviderNotReadyError:()=>Fl,ProviderWrapper:()=>sr,SafeLogger:()=>cr,ServerProviderEvents:()=>hn,ServerProviderStatus:()=>mn,StandardResolutionReasons:()=>Pl,TargetingKeyMissingError:()=>kl,TypeMismatchError:()=>Ll,isObject:()=>En,isString:()=>yn,objectOrUndefined:()=>ar,statusMatchesEvent:()=>vn,stringOrUndefined:()=>bn});_n.exports=Tl(tn);var Ee=class rn extends Error{constructor(e,r){super(e,r),Object.setPrototypeOf(this,rn.prototype),this.name="OpenFeatureError"}},Pl={TARGETING_MATCH:"TARGETING_MATCH",SPLIT:"SPLIT",DISABLED:"DISABLED",DEFAULT:"DEFAULT",UNKNOWN:"UNKNOWN",STATIC:"STATIC",CACHED:"CACHED",ERROR:"ERROR"},nn=(t=>(t.PROVIDER_NOT_READY="PROVIDER_NOT_READY",t.PROVIDER_FATAL="PROVIDER_FATAL",t.FLAG_NOT_FOUND="FLAG_NOT_FOUND",t.PARSE_ERROR="PARSE_ERROR",t.TYPE_MISMATCH="TYPE_MISMATCH",t.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",t.INVALID_CONTEXT="INVALID_CONTEXT",t.GENERAL="GENERAL",t))(nn||{}),on=class an extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,an.prototype),this.name="GeneralError",this.code="GENERAL"}},Dl=class sn extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,sn.prototype),this.name="FlagNotFoundError",this.code="FLAG_NOT_FOUND"}},Vl=class un extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,un.prototype),this.name="ParseError",this.code="PARSE_ERROR"}},Ll=class ln extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,ln.prototype),this.name="TypeMismatchError",this.code="TYPE_MISMATCH"}},kl=class cn extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,cn.prototype),this.name="TargetingKeyMissingError",this.code="TARGETING_KEY_MISSING"}},Bl=class fn extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,fn.prototype),this.name="InvalidContextError",this.code="INVALID_CONTEXT"}},Fl=class dn extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,dn.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},Ul=class pn extends Ee{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,pn.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}},mn=(t=>(t.NOT_READY="NOT_READY",t.READY="READY",t.ERROR="ERROR",t.STALE="STALE",t.FATAL="FATAL",t))(mn||{}),or=(t=>(t.NOT_READY="NOT_READY",t.READY="READY",t.ERROR="ERROR",t.STALE="STALE",t.FATAL="FATAL",t.RECONCILING="RECONCILING",t))(or||{}),hn=(t=>(t.Ready="PROVIDER_READY",t.Error="PROVIDER_ERROR",t.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",t.Stale="PROVIDER_STALE",t))(hn||{}),ut=(t=>(t.Ready="PROVIDER_READY",t.Error="PROVIDER_ERROR",t.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",t.ContextChanged="PROVIDER_CONTEXT_CHANGED",t.Reconciling="PROVIDER_RECONCILING",t.Stale="PROVIDER_STALE",t))(ut||{}),Hl={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},vn=(t,e)=>!e&&t==="PROVIDER_READY"||Hl[e]===t,lr=class{error(...t){console.error(...t)}warn(...t){console.warn(...t)}info(){}debug(){}},gn=["error","warn","info","debug"],cr=class{logger;fallbackLogger=new lr;constructor(t){try{for(let e of gn)if(!t[e]||typeof t[e]!="function")throw new Error(`The provided logger is missing the ${e} method.`);this.logger=t}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...t){this.log("error",...t)}warn(...t){this.log("warn",...t)}info(...t){this.log("info",...t)}debug(...t){this.log("debug",...t)}log(t,...e){try{this.logger[t](...e)}catch{this.fallbackLogger[t](...e)}}},$l=class{constructor(t){this.globalLogger=t}_handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap};_eventLogger;emit(t,e){this.eventEmitter.emit(t,e)}addHandler(t,e){let r=async i=>{try{await e(i)}catch(o){this._logger?.error("Error running event handler:",o)}},n=this._handlers[t].get(e);this._handlers[t].set(e,[...n||[],r]),this.eventEmitter.on(t,r)}removeHandler(t,e){let r=this._handlers[t].get(e);if(r){let n=r.pop();n&&this.eventEmitter.removeListener(t,n)}}removeAllHandlers(t){t?this.eventEmitter.removeAllListeners(t):this.eventEmitter.removeAllListeners()}getHandlers(t){return this.eventEmitter.listeners(t)}setLogger(t){return this._eventLogger=new cr(t),this}get _logger(){return this._eventLogger??this.globalLogger?.()}};function yn(t){return typeof t=="string"}function bn(t){return yn(t)?t:void 0}function En(t){return typeof t=="object"}function ar(t){return En(t)?t:void 0}function en(t){return typeof t<"u"&&t!==null}var sr=class{constructor(t,e,r){this._provider=t,this._status=e,t.events?.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),t.events?.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),t.events?.addHandler("PROVIDER_ERROR",n=>{n?.errorCode==="PROVIDER_FATAL"?this._status=r.FATAL:this._status=r.ERROR})}_pendingContextChanges=0;get provider(){return this._provider}set provider(t){this._provider=t}get status(){return this._status}set status(t){this._status=t}get allContextChangesSettled(){return this._pendingContextChanges===0}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},jl=class{_hooks=[];_context={};_logger=new lr;_clientEventHandlers=new Map;_domainScopedContext=new Map;_clientEvents=new Map;_runsOn;constructor(t){this._runsOn=t}addHooks(...t){return this._hooks=[...this._hooks,...t],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(t){return this._logger=new cr(t),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(t){return this.getProviderForClient(t).metadata}addHandler(t,e){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{let n=r[0],i=r[1].provider,o=r[1].status;if(vn(t,o))try{e({domain:n,providerName:i.metadata.name})}catch(d){this._logger?.error("Error running event handler:",d)}}),this._apiEmitter.addHandler(t,e)}removeHandler(t,e){this._apiEmitter.removeHandler(t,e)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(t){return this._apiEmitter.getHandlers(t)}async setProviderAndWait(t,e){await this.setAwaitableProvider(t,e)}setProvider(t,e){let r=this.setAwaitableProvider(t,e);return r&&r.catch(()=>{}),this}setAwaitableProvider(t,e){let r=bn(t),n=ar(t)??ar(e);if(!n){this._logger.debug("No provider defined, ignoring setProvider call");return}let i=this.getProviderForClient(r),o=n.metadata.name;if(i===n){this._logger.debug("Provider is already set, ignoring setProvider call");return}if(!n.runsOn)this._logger.debug(`Provider '${n.metadata.name}' has not defined its intended use.`);else if(n.runsOn!==this._runsOn)throw new on(`Provider '${n.metadata.name}' is intended for use on the ${n.runsOn}.`);let a=this.getAssociatedEventEmitters(r),d,c=new sr(n,this._statusEnumType.NOT_READY,this._statusEnumType);return typeof n.initialize=="function"&&!this.allProviders.includes(n)?d=n.initialize?.(r?this._domainScopedContext.get(r)??this._context:this._context)?.then(()=>{c.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(r).forEach(f=>{f?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})}),this._apiEmitter?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})})?.catch(f=>{throw f?.code==="PROVIDER_FATAL"?c.status=this._statusEnumType.FATAL:c.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(r).forEach(s=>{s?.emit("PROVIDER_ERROR",{clientName:r,domain:r,providerName:o,message:f?.message})}),this._apiEmitter?.emit("PROVIDER_ERROR",{clientName:r,domain:r,providerName:o,message:f?.message}),f}):(c.status=this._statusEnumType.READY,a.forEach(f=>{f?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})}),this._apiEmitter?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})),r?this._domainScopedProviders.set(r,c):this._defaultProvider=c,this.transferListeners(i,n,r,a),this.allProviders.includes(i)||i?.onClose?.()?.catch(f=>{this._logger.error(`error closing provider: ${f?.message}, ${f?.stack}`)}),d}getProviderForClient(t){return t?this._domainScopedProviders.get(t)?.provider??this._defaultProvider.provider:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(t){let e=this._clientEvents.get(t);if(e)return e;let r=this._createEventEmitter();this._clientEvents.set(t,r);let n=this.getProviderForClient(t);return Object.values(ut).forEach(i=>n.events?.addHandler(i,async o=>{r.emit(i,{...o,clientName:t,domain:t,providerName:n.metadata.name})})),r}getUnboundEmitters(){let t=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(en).filter(n=>!t.includes(n)).map(n=>this._clientEvents.get(n)),this._clientEvents.get(void 0)].filter(en)}getAssociatedEventEmitters(t){return t?[this.buildAndCacheEventEmitterForClient(t)]:this.getUnboundEmitters()}transferListeners(t,e,r,n){this._clientEventHandlers.get(r)?.forEach(o=>t.events?.removeHandler(...o));let i=Object.values(ut).map(o=>[o,async d=>{n.forEach(c=>{c?.emit(o,{...d,clientName:r,domain:r,providerName:e.metadata.name})}),this._apiEmitter.emit(o,{...d,clientName:r,domain:r,providerName:e.metadata.name})}]);this._clientEventHandlers.set(r,i),i.forEach(o=>e.events?.addHandler(...o))}async close(){try{await this?._defaultProvider.provider?.onClose?.()}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}let t=Array.from(this._domainScopedProviders);await Promise.all(t.map(async([,e])=>{try{await e?.provider.onClose?.()}catch(r){this.handleShutdownError(e?.provider,r)}}))}async clearProvidersAndSetDefault(t){try{await this.close()}catch{this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new sr(t,this._statusEnumType.NOT_READY,this._statusEnumType)}}get allProviders(){return[...[...this._domainScopedProviders.values()].map(t=>t.provider),this._defaultProvider.provider]}handleShutdownError(t,e){this._logger.error(`Error during shutdown of provider ${t.metadata.name}: ${e}`),this._logger.error(e?.stack)}}});var Mn=k((jp,pr)=>{"use strict";var Gl=Object.create,Dt=Object.defineProperty,zl=Object.getOwnPropertyDescriptor,An=Object.getOwnPropertyNames,ql=Object.getPrototypeOf,Yl=Object.prototype.hasOwnProperty,Wl=(t,e)=>function(){return e||(0,t[An(t)[0]])((e={exports:{}}).exports,e),e.exports},Kl=(t,e)=>{for(var r in e)Dt(t,r,{get:e[r],enumerable:!0})},Tt=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of An(e))!Yl.call(t,i)&&i!==r&&Dt(t,i,{get:()=>e[i],enumerable:!(n=zl(e,i))||n.enumerable});return t},Jl=(t,e,r)=>(Tt(t,e,"default"),r&&Tt(r,e,"default")),Ql=(t,e,r)=>(r=t!=null?Gl(ql(t)):{},Tt(e||!t||!t.__esModule?Dt(r,"default",{value:t,enumerable:!0}):r,t)),Zl=t=>Tt(Dt({},"__esModule",{value:!0}),t),Xl=Wl({"../../node_modules/eventemitter3/index.js"(t,e){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(f,s,l){this.fn=f,this.context=s,this.once=l||!1}function a(f,s,l,u,v){if(typeof l!="function")throw new TypeError("The listener must be a function");var y=new o(l,u||f,v),S=n?n+s:s;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],y]:f._events[S].push(y):(f._events[S]=y,f._eventsCount++),f}function d(f,s){--f._eventsCount===0?f._events=new i:delete f._events[s]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var s=[],l,u;if(this._eventsCount===0)return s;for(u in l=this._events)r.call(l,u)&&s.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(l)):s},c.prototype.listeners=function(s){var l=n?n+s:s,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var v=0,y=u.length,S=new Array(y);v<y;v++)S[v]=u[v].fn;return S},c.prototype.listenerCount=function(s){var l=n?n+s:s,u=this._events[l];return u?u.fn?1:u.length:0},c.prototype.emit=function(s,l,u,v,y,S){var A=n?n+s:s;if(!this._events[A])return!1;var g=this._events[A],E=arguments.length,N,_;if(g.fn){switch(g.once&&this.removeListener(s,g.fn,void 0,!0),E){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,u),!0;case 4:return g.fn.call(g.context,l,u,v),!0;case 5:return g.fn.call(g.context,l,u,v,y),!0;case 6:return g.fn.call(g.context,l,u,v,y,S),!0}for(_=1,N=new Array(E-1);_<E;_++)N[_-1]=arguments[_];g.fn.apply(g.context,N)}else{var M=g.length,V;for(_=0;_<M;_++)switch(g[_].once&&this.removeListener(s,g[_].fn,void 0,!0),E){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,l);break;case 3:g[_].fn.call(g[_].context,l,u);break;case 4:g[_].fn.call(g[_].context,l,u,v);break;default:if(!N)for(V=1,N=new Array(E-1);V<E;V++)N[V-1]=arguments[V];g[_].fn.apply(g[_].context,N)}}return!0},c.prototype.on=function(s,l,u){return a(this,s,l,u,!1)},c.prototype.once=function(s,l,u){return a(this,s,l,u,!0)},c.prototype.removeListener=function(s,l,u,v){var y=n?n+s:s;if(!this._events[y])return this;if(!l)return d(this,y),this;var S=this._events[y];if(S.fn)S.fn===l&&(!v||S.once)&&(!u||S.context===u)&&d(this,y);else{for(var A=0,g=[],E=S.length;A<E;A++)(S[A].fn!==l||v&&!S[A].once||u&&S[A].context!==u)&&g.push(S[A]);g.length?this._events[y]=g.length===1?g[0]:g:d(this,y)}return this},c.prototype.removeAllListeners=function(s){var l;return s?(l=n?n+s:s,this._events[l]&&d(this,l)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof e<"u"&&(e.exports=c)}}),dr={};Kl(dr,{InMemoryProvider:()=>oc,NOOP_PROVIDER:()=>fr,OpenFeature:()=>Rt,OpenFeatureAPI:()=>Nn,OpenFeatureClient:()=>On,OpenFeatureEventEmitter:()=>Pt,ProviderEvents:()=>xe.ClientProviderEvents,ProviderStatus:()=>lt.ClientProviderStatus});pr.exports=Zl(dr);var Ze=_e(),Fe=_e(),ec=_e(),tc=Ql(Xl(),1),Pt=class extends ec.GenericEventEmitter{eventEmitter=new tc.default;constructor(){super()}},xe=_e(),lt=_e(),rc="No-op",nc=class{metadata={name:"No-op Provider"};resolveBooleanEvaluation(t,e){return this.noOp(e)}resolveStringEvaluation(t,e){return this.noOp(e)}resolveNumberEvaluation(t,e){return this.noOp(e)}resolveObjectEvaluation(t,e){return this.noOp(e)}noOp(t){return{value:t,reason:rc}}},fr=new nc,Ue=_e(),xn=_e(),ic=class In extends xn.OpenFeatureError{code;constructor(e){super(e),Object.setPrototypeOf(this,In.prototype),this.name="VariantNotFoundError",this.code=xn.ErrorCode.GENERAL}},oc=class{events=new Pt;runsOn="client";metadata={name:"in-memory"};_flagConfiguration;_context;constructor(t={}){this._flagConfiguration={...t}}async initialize(t){try{for(let e in this._flagConfiguration)this.resolveFlagWithReason(e,t);this._context=t}catch(e){throw new Error("initialization failure",{cause:e})}}async putConfiguration(t){let e=Object.entries(t).filter(([r,n])=>this._flagConfiguration[r]!==n).map(([r])=>r);this._flagConfiguration={...t};try{await this.initialize(this._context),this.events.emit(xe.ClientProviderEvents.ConfigurationChanged,{flagsChanged:e})}catch(r){throw this.events.emit(xe.ClientProviderEvents.Error),r}}resolveBooleanEvaluation(t,e,r,n){return this.resolveAndCheckFlag(t,e,r||this._context,n)}resolveNumberEvaluation(t,e,r,n){return this.resolveAndCheckFlag(t,e,r||this._context,n)}resolveStringEvaluation(t,e,r,n){return this.resolveAndCheckFlag(t,e,r||this._context,n)}resolveObjectEvaluation(t,e,r,n){return this.resolveAndCheckFlag(t,e,r||this._context,n)}resolveAndCheckFlag(t,e,r,n){if(!(t in this._flagConfiguration)){let o=`no flag found with key ${t}`;throw n?.debug(o),new Ue.FlagNotFoundError(o)}if(this._flagConfiguration[t].disabled)return{value:e,reason:Ue.StandardResolutionReasons.DISABLED};let i=this.resolveFlagWithReason(t,r);if(i.value===void 0){let o=`no value associated with variant provided for ${t} found`;throw n?.error(o),new ic(o)}if(typeof i.value!=typeof e)throw new Ue.TypeMismatchError;return i}resolveFlagWithReason(t,e){try{return this.lookupFlagValue(t,e)}catch(r){throw r instanceof Ue.OpenFeatureError?r:new Ue.GeneralError(r?.message||"unknown error")}}lookupFlagValue(t,e){let r=this._flagConfiguration[t],n=e&&r?.contextEvaluator,i=n?r.contextEvaluator?.(e):r.defaultVariant,o=i&&r?.variants[i],a=n?Ue.StandardResolutionReasons.TARGETING_MATCH:Ue.StandardResolutionReasons.STATIC;return{value:o,...i&&{variant:i},reason:a}}},wn=Symbol.for("@openfeature/web-sdk/api"),Sn=globalThis,Nn=class Cn extends Fe.OpenFeatureCommonAPI{_statusEnumType=lt.ClientProviderStatus;_apiEmitter=new Pt;_defaultProvider=new Fe.ProviderWrapper(fr,lt.ClientProviderStatus.NOT_READY,this._statusEnumType);_domainScopedProviders=new Map;_createEventEmitter=()=>new Pt;constructor(){super("client")}static getInstance(){let e=Sn[wn];if(e)return e;let r=new Cn;return Sn[wn]=r,r}getProviderStatus(e){return e?this._domainScopedProviders.get(e)?.status??this._defaultProvider.status:this._defaultProvider.status}async setContext(e,r){let n=(0,Fe.stringOrUndefined)(e),i=(0,Fe.objectOrUndefined)(e)??(0,Fe.objectOrUndefined)(r)??{};if(n){let o=this._domainScopedProviders.get(n);if(o){let a=this.getContext(n);this._domainScopedContext.set(n,i),await this.runProviderContextChangeHandler(n,o,a,i)}else this._domainScopedContext.set(n,i)}else{let o=this._context;this._context=i;let a=Array.from(this._domainScopedProviders.entries()).filter(([c])=>!this._domainScopedContext.has(c)).reduce((c,[f,s])=>(c.push({domain:f,wrapper:s}),c),[]),d=[{domain:void 0,wrapper:this._defaultProvider},...a];await Promise.all(d.map(c=>this.runProviderContextChangeHandler(c.domain,c.wrapper,o,i)))}}getContext(e){let r=(0,Fe.stringOrUndefined)(e);if(r){let n=this._domainScopedContext.get(r);if(n)return n;this._logger.debug(`Unable to find context for '${r}'.`)}return this._context}async clearContext(e){let r=(0,Fe.stringOrUndefined)(e);if(r){let n=this._domainScopedProviders.get(r);if(n){let i=this.getContext(r);this._domainScopedContext.delete(r);let o=this.getContext();await this.runProviderContextChangeHandler(r,n,i,o)}else this._domainScopedContext.delete(r)}else return this.setContext({})}async clearContexts(){await this.clearContext(),await Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))}getClient(e,r){return new On(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),()=>this._logger,{domain:e,version:r})}async clearProviders(){await super.clearProvidersAndSetDefault(fr),this._domainScopedContext.clear()}async runProviderContextChangeHandler(e,r,n,i){let o=r.provider?.metadata?.name||"unnamed-provider";try{typeof r.provider.onContextChange=="function"&&(r.incrementPendingContextChanges(),r.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(a=>{a?.emit(xe.ClientProviderEvents.Reconciling,{domain:e,providerName:o})}),this._apiEmitter?.emit(xe.ClientProviderEvents.Reconciling,{domain:e,providerName:o}),await r.provider.onContextChange(n,i),r.decrementPendingContextChanges()),r.status=this._statusEnumType.READY,r.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(a=>{a?.emit(xe.ClientProviderEvents.ContextChanged,{clientName:e,domain:e,providerName:o})}),this._apiEmitter?.emit(xe.ClientProviderEvents.ContextChanged,{clientName:e,domain:e,providerName:o}))}catch(a){if(r.decrementPendingContextChanges(),r.status=this._statusEnumType.ERROR,r.allContextChangesSettled){let c=`Error running ${o}'s context change handler: ${a?.message}`;this._logger?.error(`${c}`,a),this.getAssociatedEventEmitters(e).forEach(f=>{f?.emit(xe.ClientProviderEvents.Error,{clientName:e,domain:e,providerName:o,message:c})}),this._apiEmitter?.emit(xe.ClientProviderEvents.Error,{clientName:e,domain:e,providerName:o,message:c})}}}},Rt=Nn.getInstance(),On=class{constructor(t,e,r,n,i){this.providerAccessor=t,this.providerStatusAccessor=e,this.emitterAccessor=r,this.globalLogger=n,this.options=i}_hooks=[];_clientLogger;get metadata(){return{name:this.options.domain??this.options.name,domain:this.options.domain??this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(t,e){if(this.emitterAccessor().addHandler(t,e),(0,Ze.statusMatchesEvent)(t,this.providerStatus))try{e({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(n){this._logger?.error("Error running event handler:",n)}}removeHandler(t,e){this.emitterAccessor().removeHandler(t,e)}getHandlers(t){return this.emitterAccessor().getHandlers(t)}setLogger(t){return this._clientLogger=new Ze.SafeLogger(t),this}addHooks(...t){return this._hooks=[...this._hooks,...t],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(t,e,r){return this.getBooleanDetails(t,e,r).value}getBooleanDetails(t,e,r){return this.evaluate(t,this._provider.resolveBooleanEvaluation,e,"boolean",r)}getStringValue(t,e,r){return this.getStringDetails(t,e,r).value}getStringDetails(t,e,r){return this.evaluate(t,this._provider.resolveStringEvaluation,e,"string",r)}getNumberValue(t,e,r){return this.getNumberDetails(t,e,r).value}getNumberDetails(t,e,r){return this.evaluate(t,this._provider.resolveNumberEvaluation,e,"number",r)}getObjectValue(t,e,r){return this.getObjectDetails(t,e,r).value}getObjectDetails(t,e,r){return this.evaluate(t,this._provider.resolveObjectEvaluation,e,"object",r)}evaluate(t,e,r,n,i={}){let o=[...Rt.getHooks(),...this.getHooks(),...i.hooks||[],...this._provider.hooks||[]],a=[...o].reverse(),d={...Rt.getContext(this?.options?.domain)},c={flagKey:t,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:Rt.providerMetadata,context:d,logger:this._logger};try{if(this.beforeHooks(o,c,i),this.providerStatus===lt.ClientProviderStatus.NOT_READY)throw new Ze.ProviderNotReadyError("provider has not yet initialized");if(this.providerStatus===lt.ClientProviderStatus.FATAL)throw new Ze.ProviderFatalError("provider is in an irrecoverable error state");let f=e.call(this._provider,t,r,d,this._logger),s={...f,flagMetadata:Object.freeze(f.flagMetadata??{}),flagKey:t};return this.afterHooks(a,c,s,i),s}catch(f){let s=f?.message,l=f?.code||Ze.ErrorCode.GENERAL;return this.errorHooks(a,c,f,i),{errorCode:l,errorMessage:s,value:r,reason:Ze.StandardResolutionReasons.ERROR,flagMetadata:Object.freeze({}),flagKey:t}}finally{this.finallyHooks(a,c,i)}}beforeHooks(t,e,r){Object.freeze(e),Object.freeze(e.context);for(let n of t)n?.before?.(e,Object.freeze(r.hookHints))}afterHooks(t,e,r,n){for(let i of t)i?.after?.(e,r,n.hookHints)}errorHooks(t,e,r,n){for(let i of t)try{i?.error?.(e,r,n.hookHints)}catch(o){this._logger.error(`Unhandled error during 'error' hook: ${o}`),o instanceof Error&&this._logger.error(o.stack),this._logger.error(o?.stack)}}finallyHooks(t,e,r){for(let n of t)try{n?.finally?.(e,r.hookHints)}catch(i){this._logger.error(`Unhandled error during 'finally' hook: ${i}`),i instanceof Error&&this._logger.error(i.stack),this._logger.error(i?.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}};Jl(dr,_e(),pr.exports)});var Rn=k((mr,hr)=>{(function(t,e){typeof mr=="object"&&typeof hr<"u"?hr.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.fetchRetry=e())})(mr,function(){"use strict";var t=function(n,i){if(i=i||{},typeof n!="function")throw new r("fetch must be a function");if(typeof i!="object")throw new r("defaults must be an object");if(i.retries!==void 0&&!e(i.retries))throw new r("retries must be a positive integer");if(i.retryDelay!==void 0&&!e(i.retryDelay)&&typeof i.retryDelay!="function")throw new r("retryDelay must be a positive integer or a function returning a positive integer");if(i.retryOn!==void 0&&!Array.isArray(i.retryOn)&&typeof i.retryOn!="function")throw new r("retryOn property expects an array or function");var o={retries:3,retryDelay:1e3,retryOn:[]};return i=Object.assign(o,i),function(d,c){var f=i.retries,s=i.retryDelay,l=i.retryOn;if(c&&c.retries!==void 0)if(e(c.retries))f=c.retries;else throw new r("retries must be a positive integer");if(c&&c.retryDelay!==void 0)if(e(c.retryDelay)||typeof c.retryDelay=="function")s=c.retryDelay;else throw new r("retryDelay must be a positive integer or a function returning a positive integer");if(c&&c.retryOn)if(Array.isArray(c.retryOn)||typeof c.retryOn=="function")l=c.retryOn;else throw new r("retryOn property expects an array or function");return new Promise(function(u,v){var y=function(A){var g=typeof Request<"u"&&d instanceof Request?d.clone():d;n(g,c).then(function(E){if(Array.isArray(l)&&l.indexOf(E.status)===-1)u(E);else if(typeof l=="function")try{return Promise.resolve(l(A,null,E)).then(function(N){N?S(A,null,E):u(E)}).catch(v)}catch(N){v(N)}else A<f?S(A,null,E):u(E)}).catch(function(E){if(typeof l=="function")try{Promise.resolve(l(A,E,null)).then(function(N){N?S(A,E,null):v(E)}).catch(function(N){v(N)})}catch(N){v(N)}else A<f?S(A,E,null):v(E)})};function S(A,g,E){var N=typeof s=="function"?s(A,g,E):s;setTimeout(function(){y(++A)},N)}y(0)})}};function e(n){return Number.isInteger(n)&&n>=0}function r(n){this.name="ArgumentError",this.message=n}return t})});var Pn=k((Wp,Tn)=>{function ac(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}Tn.exports=ac});var Vn=k((Kp,Dn)=>{function sc(t,e){return t===e||t!==t&&e!==e}Dn.exports=sc});var kn=k((Jp,Ln)=>{var uc=typeof global=="object"&&global&&global.Object===Object&&global;Ln.exports=uc});var Fn=k((Qp,Bn)=>{var lc=kn(),cc=typeof self=="object"&&self&&self.Object===Object&&self,fc=lc||cc||Function("return this")();Bn.exports=fc});var vr=k((Zp,Un)=>{var dc=Fn(),pc=dc.Symbol;Un.exports=pc});var Gn=k((Xp,jn)=>{var Hn=vr(),$n=Object.prototype,mc=$n.hasOwnProperty,hc=$n.toString,ct=Hn?Hn.toStringTag:void 0;function vc(t){var e=mc.call(t,ct),r=t[ct];try{t[ct]=void 0;var n=!0}catch{}var i=hc.call(t);return n&&(e?t[ct]=r:delete t[ct]),i}jn.exports=vc});var qn=k((em,zn)=>{var gc=Object.prototype,yc=gc.toString;function bc(t){return yc.call(t)}zn.exports=bc});var He=k((tm,Kn)=>{var Yn=vr(),Ec=Gn(),_c=qn(),xc="[object Null]",wc="[object Undefined]",Wn=Yn?Yn.toStringTag:void 0;function Sc(t){return t==null?t===void 0?wc:xc:Wn&&Wn in Object(t)?Ec(t):_c(t)}Kn.exports=Sc});var Vt=k((rm,Jn)=>{function Ac(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}Jn.exports=Ac});var Zn=k((nm,Qn)=>{var Ic=He(),Nc=Vt(),Cc="[object AsyncFunction]",Oc="[object Function]",Mc="[object GeneratorFunction]",Rc="[object Proxy]";function Tc(t){if(!Nc(t))return!1;var e=Ic(t);return e==Oc||e==Mc||e==Cc||e==Rc}Qn.exports=Tc});var ei=k((im,Xn)=>{var Pc=9007199254740991;function Dc(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Pc}Xn.exports=Dc});var ri=k((om,ti)=>{var Vc=Zn(),Lc=ei();function kc(t){return t!=null&&Lc(t.length)&&!Vc(t)}ti.exports=kc});var ii=k((am,ni)=>{var Bc=9007199254740991,Fc=/^(?:0|[1-9]\d*)$/;function Uc(t,e){var r=typeof t;return e=e??Bc,!!e&&(r=="number"||r!="symbol"&&Fc.test(t))&&t>-1&&t%1==0&&t<e}ni.exports=Uc});var ai=k((sm,oi)=>{var Hc=Vn(),$c=ri(),jc=ii(),Gc=Vt();function zc(t,e,r){if(!Gc(r))return!1;var n=typeof e;return(n=="number"?$c(r)&&jc(e,r.length):n=="string"&&e in r)?Hc(r[e],t):!1}oi.exports=zc});var ui=k((um,si)=>{var qc=/\s/;function Yc(t){for(var e=t.length;e--&&qc.test(t.charAt(e)););return e}si.exports=Yc});var ci=k((lm,li)=>{var Wc=ui(),Kc=/^\s+/;function Jc(t){return t&&t.slice(0,Wc(t)+1).replace(Kc,"")}li.exports=Jc});var Xe=k((cm,fi)=>{function Qc(t){return t!=null&&typeof t=="object"}fi.exports=Qc});var pi=k((fm,di)=>{var Zc=He(),Xc=Xe(),ef="[object Symbol]";function tf(t){return typeof t=="symbol"||Xc(t)&&Zc(t)==ef}di.exports=tf});var gi=k((dm,vi)=>{var rf=ci(),mi=Vt(),nf=pi(),hi=NaN,of=/^[-+]0x[0-9a-f]+$/i,af=/^0b[01]+$/i,sf=/^0o[0-7]+$/i,uf=parseInt;function lf(t){if(typeof t=="number")return t;if(nf(t))return hi;if(mi(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=mi(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=rf(t);var r=af.test(t);return r||sf.test(t)?uf(t.slice(2),r?2:8):of.test(t)?hi:+t}vi.exports=lf});var Ei=k((pm,bi)=>{var cf=gi(),yi=1/0,ff=17976931348623157e292;function df(t){if(!t)return t===0?t:0;if(t=cf(t),t===yi||t===-yi){var e=t<0?-1:1;return e*ff}return t===t?t:0}bi.exports=df});var xi=k((mm,_i)=>{var pf=Ei();function mf(t){var e=pf(t),r=e%1;return e===e?r?e-r:e:0}_i.exports=mf});var Si=k((hm,wi)=>{var hf=Pn(),vf=ai(),gf=xi(),yf=Math.ceil,bf=Math.max;function Ef(t,e,r){(r?vf(t,e,r):e===void 0)?e=1:e=bf(gf(e),0);var n=t==null?0:t.length;if(!n||e<1)return[];for(var i=0,o=0,a=Array(yf(n/e));i<n;)a[o++]=hf(t,i,i+=e);return a}wi.exports=Ef});function gr(){if(!Lt&&(Lt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lt(_f)}var Lt,_f,Ai=m(()=>{_f=new Uint8Array(16)});var Ii,Ni=m(()=>{Ii=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function xf(t){return typeof t=="string"&&Ii.test(t)}var Ci,Oi=m(()=>{Ni();Ci=xf});function wf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(X[t[e+0]]+X[t[e+1]]+X[t[e+2]]+X[t[e+3]]+"-"+X[t[e+4]]+X[t[e+5]]+"-"+X[t[e+6]]+X[t[e+7]]+"-"+X[t[e+8]]+X[t[e+9]]+"-"+X[t[e+10]]+X[t[e+11]]+X[t[e+12]]+X[t[e+13]]+X[t[e+14]]+X[t[e+15]]).toLowerCase();if(!Ci(r))throw TypeError("Stringified UUID is invalid");return r}var X,kt,Mi,Ri=m(()=>{Oi();X=[];for(kt=0;kt<256;++kt)X.push((kt+256).toString(16).substr(1));Mi=wf});function Sf(t,e,r){t=t||{};var n=t.random||(t.rng||gr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return Mi(n)}var yr,Ti=m(()=>{Ai();Ri();yr=Sf});var Pi=m(()=>{Ti()});var Di=k((ft,Bt)=>{(function(t,e){"use strict";var r="1.0.37",n="",i="?",o="function",a="undefined",d="object",c="string",f="major",s="model",l="name",u="type",v="vendor",y="version",S="architecture",A="console",g="mobile",E="tablet",N="smarttv",_="wearable",M="embedded",V=500,z="Amazon",U="Apple",Ne="ASUS",ge="BlackBerry",se="Browser",oe="Chrome",Ve="Edge",de="Firefox",ue="Google",j="Huawei",ee="LG",Ye="Microsoft",ot="Motorola",Le="Opera",G="Samsung",ye="Sharp",We="Sony",q="Xiaomi",at="Zebra",It="Facebook",Nt="Chromium OS",Ct="Mac OS",pe=function(L,p){var h={};for(var b in L)p[b]&&p[b].length%2===0?h[b]=p[b].concat(L[b]):h[b]=L[b];return h},ke=function(L){for(var p={},h=0;h<L.length;h++)p[L[h].toUpperCase()]=L[h];return p},be=function(L,p){return typeof L===c?Ce(p).indexOf(Ce(L))!==-1:!1},Ce=function(L){return L.toLowerCase()},nr=function(L){return typeof L===c?L.replace(/[^\d\.]/g,n).split(".")[0]:e},Ke=function(L,p){if(typeof L===c)return L=L.replace(/^\s\s*/,n),typeof p===a?L:L.substring(0,V)},Be=function(L,p){for(var h=0,b,w,I,P,x,T;h<p.length&&!x;){var R=p[h],B=p[h+1];for(b=w=0;b<R.length&&!x&&R[b];)if(x=R[b++].exec(L),x)for(I=0;I<B.length;I++)T=x[++w],P=B[I],typeof P===d&&P.length>0?P.length===2?typeof P[1]==o?this[P[0]]=P[1].call(this,T):this[P[0]]=P[1]:P.length===3?typeof P[1]===o&&!(P[1].exec&&P[1].test)?this[P[0]]=T?P[1].call(this,T,P[2]):e:this[P[0]]=T?T.replace(P[1],P[2]):e:P.length===4&&(this[P[0]]=T?P[3].call(this,T.replace(P[1],P[2])):e):this[P]=T||e;h+=2}},st=function(L,p){for(var h in p)if(typeof p[h]===d&&p[h].length>0){for(var b=0;b<p[h].length;b++)if(be(p[h][b],L))return h===i?e:h}else if(be(p[h],L))return h===i?e:h;return L},ir={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ot={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Je={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,y],[/opios[\/ ]+([\w\.]+)/i],[y,[l,Le+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[l,Le]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[y,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[l,"UC"+se]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[y,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[y,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[y,[l,"Smart Lenovo "+se]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+se],y],[/\bfocus\/([\w\.]+)/i],[y,[l,de+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[l,Le+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[l,Le+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[l,"MIUI "+se]],[/fxios\/([-\w\.]+)/i],[y,[l,de]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+se]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+se],y],[/samsungbrowser\/([\w\.]+)/i],[y,[l,G+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],y],[/metasr[\/ ]?([\d\.]+)/i],[y,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,y],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,It],y],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[y,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[l,oe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,oe+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[l,"Android "+se]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,y],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[y,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[y,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[y,st,ir]],[/(webkit|khtml)\/([\w\.]+)/i],[l,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[l,de+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,y],[/(cobalt)\/([\w\.]+)/i],[l,[y,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,Ce]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,n,Ce]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,Ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[s,[v,G],[u,E]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[s,[v,G],[u,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[s,[v,U],[u,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[v,U],[u,E]],[/(macintosh);/i],[s,[v,U]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[s,[v,ye],[u,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[s,[v,j],[u,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[s,[v,j],[u,g]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[s,/_/g," "],[v,q],[u,g]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[s,/_/g," "],[v,q],[u,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[s,[v,"OPPO"],[u,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[s,[v,"Vivo"],[u,g]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[s,[v,"Realme"],[u,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[s,[v,ot],[u,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[s,[v,ot],[u,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[s,[v,ee],[u,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[s,[v,ee],[u,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[s,[v,"Lenovo"],[u,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[s,/_/g," "],[v,"Nokia"],[u,g]],[/(pixel c)\b/i],[s,[v,ue],[u,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[s,[v,ue],[u,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[v,We],[u,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[s,"Xperia Tablet"],[v,We],[u,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[s,[v,"OnePlus"],[u,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[s,[v,z],[u,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[s,/(.+)/g,"Fire Phone $1"],[v,z],[u,g]],[/(playbook);[-\w\),; ]+(rim)/i],[s,v,[u,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[s,[v,ge],[u,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[s,[v,Ne],[u,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[s,[v,Ne],[u,g]],[/(nexus 9)/i],[s,[v,"HTC"],[u,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[s,/_/g," "],[u,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[s,[v,"Acer"],[u,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[s,[v,"Meizu"],[u,g]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[s,[v,"Ulefone"],[u,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,s,[u,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,s,[u,E]],[/(surface duo)/i],[s,[v,Ye],[u,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[s,[v,"Fairphone"],[u,g]],[/(u304aa)/i],[s,[v,"AT&T"],[u,g]],[/\bsie-(\w*)/i],[s,[v,"Siemens"],[u,g]],[/\b(rct\w+) b/i],[s,[v,"RCA"],[u,E]],[/\b(venue[\d ]{2,7}) b/i],[s,[v,"Dell"],[u,E]],[/\b(q(?:mv|ta)\w+) b/i],[s,[v,"Verizon"],[u,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[s,[v,"Barnes & Noble"],[u,E]],[/\b(tm\d{3}\w+) b/i],[s,[v,"NuVision"],[u,E]],[/\b(k88) b/i],[s,[v,"ZTE"],[u,E]],[/\b(nx\d{3}j) b/i],[s,[v,"ZTE"],[u,g]],[/\b(gen\d{3}) b.+49h/i],[s,[v,"Swiss"],[u,g]],[/\b(zur\d{3}) b/i],[s,[v,"Swiss"],[u,E]],[/\b((zeki)?tb.*\b) b/i],[s,[v,"Zeki"],[u,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],s,[u,E]],[/\b(ns-?\w{0,9}) b/i],[s,[v,"Insignia"],[u,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[s,[v,"NextBook"],[u,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],s,[u,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],s,[u,g]],[/\b(ph-1) /i],[s,[v,"Essential"],[u,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[s,[v,"Envizen"],[u,E]],[/\b(trio[-\w\. ]+) b/i],[s,[v,"MachSpeed"],[u,E]],[/\btu_(1491) b/i],[s,[v,"Rotor"],[u,E]],[/(shield[\w ]+) b/i],[s,[v,"Nvidia"],[u,E]],[/(sprint) (\w+)/i],[v,s,[u,g]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[v,Ye],[u,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[v,at],[u,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[v,at],[u,g]],[/smart-tv.+(samsung)/i],[v,[u,N]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[v,G],[u,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,ee],[u,N]],[/(apple) ?tv/i],[v,[s,U+" TV"],[u,N]],[/crkey/i],[[s,oe+"cast"],[v,ue],[u,N]],[/droid.+aft(\w+)( bui|\))/i],[s,[v,z],[u,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[s,[v,ye],[u,N]],[/(bravia[\w ]+)( bui|\))/i],[s,[v,We],[u,N]],[/(mitv-\w{5}) bui/i],[s,[v,q],[u,N]],[/Hbbtv.*(technisat) (.*);/i],[v,s,[u,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,Ke],[s,Ke],[u,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,s,[u,A]],[/droid.+; (shield) bui/i],[s,[v,"Nvidia"],[u,A]],[/(playstation [345portablevi]+)/i],[s,[v,We],[u,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[s,[v,Ye],[u,A]],[/((pebble))app/i],[v,s,[u,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[s,[v,U],[u,_]],[/droid.+; (glass) \d/i],[s,[v,ue],[u,_]],[/droid.+; (wt63?0{2,3})\)/i],[s,[v,at],[u,_]],[/(quest( 2| pro)?)/i],[s,[v,It],[u,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[u,M]],[/(aeobc)\b/i],[s,[v,z],[u,M]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[s,[u,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[s,[u,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,E]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,g]],[/(android[-\w\. ]{0,9});.+buil/i],[s,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[l,Ve+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,y],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[y,st,Ot]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,st,Ot],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,Ct],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[y,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,y],[/\(bb(10);/i],[y,[l,ge]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[l,de+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[y,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[y,[l,oe+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,Nt],y],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,y],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,y]]},te=function(L,p){if(typeof L===d&&(p=L,L=e),!(this instanceof te))return new te(L,p).getResult();var h=typeof t!==a&&t.navigator?t.navigator:e,b=L||(h&&h.userAgent?h.userAgent:n),w=h&&h.userAgentData?h.userAgentData:e,I=p?pe(Je,p):Je,P=h&&h.userAgent==b;return this.getBrowser=function(){var x={};return x[l]=e,x[y]=e,Be.call(x,b,I.browser),x[f]=nr(x[y]),P&&h&&h.brave&&typeof h.brave.isBrave==o&&(x[l]="Brave"),x},this.getCPU=function(){var x={};return x[S]=e,Be.call(x,b,I.cpu),x},this.getDevice=function(){var x={};return x[v]=e,x[s]=e,x[u]=e,Be.call(x,b,I.device),P&&!x[u]&&w&&w.mobile&&(x[u]=g),P&&x[s]=="Macintosh"&&h&&typeof h.standalone!==a&&h.maxTouchPoints&&h.maxTouchPoints>2&&(x[s]="iPad",x[u]=E),x},this.getEngine=function(){var x={};return x[l]=e,x[y]=e,Be.call(x,b,I.engine),x},this.getOS=function(){var x={};return x[l]=e,x[y]=e,Be.call(x,b,I.os),P&&!x[l]&&w&&w.platform!="Unknown"&&(x[l]=w.platform.replace(/chrome os/i,Nt).replace(/macos/i,Ct)),x},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(x){return b=typeof x===c&&x.length>V?Ke(x,V):x,this},this.setUA(b),this};te.VERSION=r,te.BROWSER=ke([l,y,f]),te.CPU=ke([S]),te.DEVICE=ke([s,v,u,A,g,N,E,_,M]),te.ENGINE=te.OS=ke([l,y]),typeof ft!==a?(typeof Bt!==a&&Bt.exports&&(ft=Bt.exports=te),ft.UAParser=te):typeof define===o&&define.amd?define(function(){return te}):typeof t!==a&&(t.UAParser=te);var Oe=typeof t!==a&&(t.jQuery||t.Zepto);if(Oe&&!Oe.ua){var Qe=new te;Oe.ua=Qe.getResult(),Oe.ua.get=function(){return Qe.getUA()},Oe.ua.set=function(L){Qe.setUA(L);var p=Qe.getResult();for(var h in p)Oe.ua[h]=p[h]}}})(typeof window=="object"?window:ft)});var Li=k((Nm,Vi)=>{var Af=Array.isArray;Vi.exports=Af});var Bi=k((Cm,ki)=>{var If=He(),Nf=Li(),Cf=Xe(),Of="[object String]";function Mf(t){return typeof t=="string"||!Nf(t)&&Cf(t)&&If(t)==Of}ki.exports=Mf});var Re,dt=m(()=>{Re=function(){function t(e){this.groups=[],this.each=!1,this.context=void 0,this.type=e.type,this.name=e.name,this.target=e.target,this.propertyName=e.propertyName,this.constraints=e?.constraints,this.constraintCls=e.constraintCls,this.validationTypeOptions=e.validationTypeOptions,e.validationOptions&&(this.message=e.validationOptions.message,this.groups=e.validationOptions.groups,this.always=e.validationOptions.always,this.each=e.validationOptions.each,this.context=e.validationOptions.context)}return t}()});var Fi,Ui=m(()=>{dt();Fi=function(){function t(){}return t.prototype.transform=function(e){var r=[];return Object.keys(e.properties).forEach(function(n){e.properties[n].forEach(function(i){var o={message:i.message,groups:i.groups,always:i.always,each:i.each},a={type:i.type,name:i.name,target:e.name,propertyName:n,constraints:i.constraints,validationTypeOptions:i.options,validationOptions:o};r.push(new Re(a))})}),r},t}()});function Hi(t){return t instanceof Map?Array.from(t.values()):Array.isArray(t)?t:Array.from(t)}var $i=m(()=>{});function ji(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}var Gi=m(()=>{});function Ft(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var zi=m(()=>{});var br=m(()=>{$i();Gi();zi()});function we(){var t=ji();return t.classValidatorMetadataStorage||(t.classValidatorMetadataStorage=new Er),t.classValidatorMetadataStorage}var Rf,qi,Tf,Er,et=m(()=>{Ui();br();Rf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qi=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(d){a={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Tf=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Er=function(){function t(){this.validationMetadatas=new Map,this.constraintMetadatas=new Map}return Object.defineProperty(t.prototype,"hasValidationMetaData",{get:function(){return!!this.validationMetadatas.size},enumerable:!1,configurable:!0}),t.prototype.addValidationSchema=function(e){var r=this,n=new Fi().transform(e);n.forEach(function(i){return r.addValidationMetadata(i)})},t.prototype.addValidationMetadata=function(e){var r=this.validationMetadatas.get(e.target);r?r.push(e):this.validationMetadatas.set(e.target,[e])},t.prototype.addConstraintMetadata=function(e){var r=this.constraintMetadatas.get(e.target);r?r.push(e):this.constraintMetadatas.set(e.target,[e])},t.prototype.groupByPropertyName=function(e){var r={};return e.forEach(function(n){r[n.propertyName]||(r[n.propertyName]=[]),r[n.propertyName].push(n)}),r},t.prototype.getTargetValidationMetadatas=function(e,r,n,i,o){var a,d,c=function(_){return typeof _.always<"u"?_.always:_.groups&&_.groups.length?!1:n},f=function(_){return!!(i&&(!o||!o.length)&&_.groups&&_.groups.length)},s=this.validationMetadatas.get(e)||[],l=s.filter(function(_){return _.target!==e&&_.target!==r?!1:c(_)?!0:f(_)?!1:o&&o.length>0?_.groups&&!!_.groups.find(function(M){return o.indexOf(M)!==-1}):!0}),u=[];try{for(var v=Rf(this.validationMetadatas.entries()),y=v.next();!y.done;y=v.next()){var S=qi(y.value,2),A=S[0],g=S[1];e.prototype instanceof A&&u.push.apply(u,Tf([],qi(g),!1))}}catch(_){a={error:_}}finally{try{y&&!y.done&&(d=v.return)&&d.call(v)}finally{if(a)throw a.error}}var E=u.filter(function(_){return typeof _.target=="string"||_.target===e||_.target instanceof Function&&!(e.prototype instanceof _.target)?!1:c(_)?!0:f(_)?!1:o&&o.length>0?_.groups&&!!_.groups.find(function(M){return o.indexOf(M)!==-1}):!0}),N=E.filter(function(_){return!l.find(function(M){return M.propertyName===_.propertyName&&M.type===_.type})});return l.concat(N)},t.prototype.getTargetValidatorConstraints=function(e){return this.constraintMetadatas.get(e)||[]},t}()});var _r,xr=m(()=>{_r=function(){function t(){}return t.prototype.toString=function(e,r,n,i){var o=this;e===void 0&&(e=!1),r===void 0&&(r=!1),n===void 0&&(n=""),i===void 0&&(i=!1);var a=e?"\x1B[1m":"",d=e?"\x1B[22m":"",c=function(){var l;return(i?Object.values:Object.keys)((l=o.constraints)!==null&&l!==void 0?l:{}).join(", ")},f=function(l){return" - property ".concat(a).concat(n).concat(l).concat(d," has failed the following constraints: ").concat(a).concat(c()).concat(d,` 
`)};if(r){var s=Number.isInteger(+this.property)?"[".concat(this.property,"]"):"".concat(n?".":"").concat(this.property);return this.constraints?f(s):this.children?this.children.map(function(l){return l.toString(e,!0,"".concat(n).concat(s),i)}).join(""):""}else return"An instance of ".concat(a).concat(this.target?this.target.constructor.name:"an object").concat(d,` has failed the validation:
`)+(this.constraints?f(this.property):"")+(this.children?this.children.map(function(l){return l.toString(e,!0,o.property,i)}).join(""):"")},t}()});var W,$e=m(()=>{W=function(){function t(){}return t.isValid=function(e){var r=this;return e!=="isValid"&&e!=="getMessage"&&Object.keys(this).map(function(n){return r[n]}).indexOf(e)!==-1},t.CUSTOM_VALIDATION="customValidation",t.NESTED_VALIDATION="nestedValidation",t.PROMISE_VALIDATION="promiseValidation",t.CONDITIONAL_VALIDATION="conditionalValidation",t.WHITELIST="whitelistValidation",t.IS_DEFINED="isDefined",t}()});function Pf(t){return Array.isArray(t)?t.join(", "):(typeof t=="symbol"&&(t=t.description),"".concat(t))}var Yi,Wi=m(()=>{Yi=function(){function t(){}return t.replaceMessageSpecialTokens=function(e,r){var n;return e instanceof Function?n=e(r):typeof e=="string"&&(n=e),n&&Array.isArray(r.constraints)&&r.constraints.forEach(function(i,o){n=n.replace(new RegExp("\\$constraint".concat(o+1),"g"),Pf(i))}),n&&r.value!==void 0&&r.value!==null&&["string","boolean","number"].includes(typeof r.value)&&(n=n.replace(/\$value/g,r.value)),n&&(n=n.replace(/\$property/g,r.property)),n&&(n=n.replace(/\$target/g,r.targetName)),n},t}()});var pt,wr,Ki=m(()=>{xr();$e();Wi();br();et();pt=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(d){a={error:d}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},wr=function(){function t(e,r){this.validator=e,this.validatorOptions=r,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=we()}return t.prototype.execute=function(e,r,n){var i=this,o,a;!this.metadataStorage.hasValidationMetaData&&((o=this.validatorOptions)===null||o===void 0?void 0:o.enableDebugMessages)===!0&&console.warn(`No validation metadata found. No validation will be  performed. There are multiple possible reasons:
  - There may be multiple class-validator versions installed. You will need to flatten your dependencies to fix the issue.
  - This validation runs before any file with validation decorator was parsed by NodeJS.`);var d=this.validatorOptions?this.validatorOptions.groups:void 0,c=this.validatorOptions&&this.validatorOptions.strictGroups||!1,f=this.validatorOptions&&this.validatorOptions.always||!1,s=((a=this.validatorOptions)===null||a===void 0?void 0:a.forbidUnknownValues)===void 0||this.validatorOptions.forbidUnknownValues!==!1,l=this.metadataStorage.getTargetValidationMetadatas(e.constructor,r,f,c,d),u=this.metadataStorage.groupByPropertyName(l);if(this.validatorOptions&&s&&!l.length){var v=new _r;(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(v.target=e),v.value=void 0,v.property=void 0,v.children=[],v.constraints={unknownValue:"an unknown value was passed to the validate function"},n.push(v);return}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(e,u,n),Object.keys(u).forEach(function(y){var S=e[y],A=u[y].filter(function(E){return E.type===W.IS_DEFINED}),g=u[y].filter(function(E){return E.type!==W.IS_DEFINED&&E.type!==W.WHITELIST});S instanceof Promise&&g.find(function(E){return E.type===W.PROMISE_VALIDATION})?i.awaitingPromises.push(S.then(function(E){i.performValidations(e,E,y,A,g,n)})):i.performValidations(e,S,y,A,g,n)})},t.prototype.whitelist=function(e,r,n){var i=this,o=[];Object.keys(e).forEach(function(a){(!r[a]||r[a].length===0)&&o.push(a)}),o.length>0&&(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?o.forEach(function(a){var d,c=i.generateValidationError(e,e[a],a);c.constraints=(d={},d[W.WHITELIST]="property ".concat(a," should not exist"),d),c.children=void 0,n.push(c)}):o.forEach(function(a){return delete e[a]}))},t.prototype.stripEmptyErrors=function(e){var r=this;return e.filter(function(n){if(n.children&&(n.children=r.stripEmptyErrors(n.children)),Object.keys(n.constraints).length===0){if(n.children.length===0)return!1;delete n.constraints}return!0})},t.prototype.performValidations=function(e,r,n,i,o,a){var d=o.filter(function(u){return u.type===W.CUSTOM_VALIDATION}),c=o.filter(function(u){return u.type===W.NESTED_VALIDATION}),f=o.filter(function(u){return u.type===W.CONDITIONAL_VALIDATION}),s=this.generateValidationError(e,r,n);a.push(s);var l=this.conditionalValidations(e,r,f);l&&(this.customValidations(e,r,i,s),this.mapContexts(e,r,i,s),!(r===void 0&&this.validatorOptions&&this.validatorOptions.skipUndefinedProperties===!0)&&(r===null&&this.validatorOptions&&this.validatorOptions.skipNullProperties===!0||r==null&&this.validatorOptions&&this.validatorOptions.skipMissingProperties===!0||(this.customValidations(e,r,d,s),this.nestedValidations(r,c,s),this.mapContexts(e,r,o,s),this.mapContexts(e,r,d,s))))},t.prototype.generateValidationError=function(e,r,n){var i=new _r;return(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(i.target=e),(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.value===void 0||this.validatorOptions.validationError.value===!0)&&(i.value=r),i.property=n,i.children=[],i.constraints={},i},t.prototype.conditionalValidations=function(e,r,n){return n.map(function(i){return i.constraints[0](e,r)}).reduce(function(i,o){return i&&o},!0)},t.prototype.customValidations=function(e,r,n,i){var o=this;n.forEach(function(a){o.metadataStorage.getTargetValidatorConstraints(a.constraintCls).forEach(function(d){if(!(d.async&&o.ignoreAsyncValidations)&&!(o.validatorOptions&&o.validatorOptions.stopAtFirstError&&Object.keys(i.constraints||{}).length>0)){var c={targetName:e.constructor?e.constructor.name:void 0,property:a.propertyName,object:e,value:r,constraints:a.constraints};if(!a.each||!(Array.isArray(r)||r instanceof Set||r instanceof Map)){var f=d.instance.validate(r,c);if(Ft(f)){var s=f.then(function(M){if(!M){var V=pt(o.createValidationError(e,r,a,d),2),z=V[0],U=V[1];i.constraints[z]=U,a.context&&(i.contexts||(i.contexts={}),i.contexts[z]=Object.assign(i.contexts[z]||{},a.context))}});o.awaitingPromises.push(s)}else if(!f){var l=pt(o.createValidationError(e,r,a,d),2),u=l[0],v=l[1];i.constraints[u]=v}return}var y=Hi(r),S=y.map(function(M){return d.instance.validate(M,c)}),A=S.some(function(M){return Ft(M)});if(A){var g=S.map(function(M){return Ft(M)?M:Promise.resolve(M)}),E=Promise.all(g).then(function(M){var V=M.every(function(ge){return ge});if(!V){var z=pt(o.createValidationError(e,r,a,d),2),U=z[0],Ne=z[1];i.constraints[U]=Ne,a.context&&(i.contexts||(i.contexts={}),i.contexts[U]=Object.assign(i.contexts[U]||{},a.context))}});o.awaitingPromises.push(E);return}var N=S.every(function(M){return M});if(!N){var _=pt(o.createValidationError(e,r,a,d),2),u=_[0],v=_[1];i.constraints[u]=v}}})})},t.prototype.nestedValidations=function(e,r,n){var i=this;e!==void 0&&r.forEach(function(o){if(!(o.type!==W.NESTED_VALIDATION&&o.type!==W.PROMISE_VALIDATION)&&!(i.validatorOptions&&i.validatorOptions.stopAtFirstError&&Object.keys(n.constraints||{}).length>0))if(Array.isArray(e)||e instanceof Set||e instanceof Map){var a=e instanceof Set?Array.from(e):e;a.forEach(function(l,u){i.performValidations(e,l,u.toString(),[],r,n.children)})}else if(e instanceof Object){var d=typeof o.target=="string"?o.target:o.target.name;i.execute(e,d,n.children)}else{var c=pt(i.createValidationError(o.target,e,o),2),f=c[0],s=c[1];n.constraints[f]=s}})},t.prototype.mapContexts=function(e,r,n,i){var o=this;return n.forEach(function(a){if(a.context){var d=void 0;if(a.type===W.CUSTOM_VALIDATION){var c=o.metadataStorage.getTargetValidatorConstraints(a.constraintCls);d=c[0]}var f=o.getConstraintType(a,d);i.constraints[f]&&(i.contexts||(i.contexts={}),i.contexts[f]=Object.assign(i.contexts[f]||{},a.context))}})},t.prototype.createValidationError=function(e,r,n,i){var o=e.constructor?e.constructor.name:void 0,a=this.getConstraintType(n,i),d={targetName:o,property:n.propertyName,object:e,value:r,constraints:n.constraints},c=n.message||"";!n.message&&(!this.validatorOptions||this.validatorOptions&&!this.validatorOptions.dismissDefaultMessages)&&i&&i.instance.defaultMessage instanceof Function&&(c=i.instance.defaultMessage(d));var f=Yi.replaceMessageSpecialTokens(c,d);return[a,f]},t.prototype.getConstraintType=function(e,r){var n=r&&r.name?r.name:e.type;return n},t}()});var Df,Vf,Zm,Ji=m(()=>{Ki();Df=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function d(s){try{f(n.next(s))}catch(l){a(l)}}function c(s){try{f(n.throw(s))}catch(l){a(l)}}function f(s){s.done?o(s.value):i(s.value).then(d,c)}f((n=n.apply(t,e||[])).next())})},Vf=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function d(f){return function(s){return c([f,s])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(s){f=[6,s],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Zm=function(){function t(){}return t.prototype.validate=function(e,r,n){return this.coreValidate(e,r,n)},t.prototype.validateOrReject=function(e,r,n){return Df(this,void 0,void 0,function(){var i;return Vf(this,function(o){switch(o.label){case 0:return[4,this.coreValidate(e,r,n)];case 1:return i=o.sent(),i.length?[2,Promise.reject(i)]:[2]}})})},t.prototype.validateSync=function(e,r,n){var i=typeof e=="string"?r:e,o=typeof e=="string"?n:r,a=typeof e=="string"?e:void 0,d=new wr(this,o);d.ignoreAsyncValidations=!0;var c=[];return d.execute(i,a,c),d.stripEmptyErrors(c)},t.prototype.coreValidate=function(e,r,n){var i=typeof e=="string"?r:e,o=typeof e=="string"?n:r,a=typeof e=="string"?e:void 0,d=new wr(this,o),c=[];return d.execute(i,a,c),Promise.all(d.awaitingPromises).then(function(){return d.stripEmptyErrors(c)})},t}()});function Ht(t){if(Qi)try{var e=Qi.get(t);if(e||!Ut||!Ut.fallback)return e}catch(r){if(!Ut||!Ut.fallbackOnErrors)throw r}return Lf.get(t)}var Lf,Qi,Ut,$t=m(()=>{Lf=new(function(){function t(){this.instances=[]}return t.prototype.get=function(e){var r=this.instances.find(function(n){return n.type===e});return r||(r={type:e,object:new e},this.instances.push(r)),r.object},t}())});var Zi=m(()=>{});var Xi,eo=m(()=>{$t();Xi=function(){function t(e,r,n){n===void 0&&(n=!1),this.target=e,this.name=r,this.async=n}return Object.defineProperty(t.prototype,"instance",{get:function(){return Ht(this.target)},enumerable:!1,configurable:!0}),t}()});function mt(t){var e;if(t.validator instanceof Function){e=t.validator;var r=Ht(Er).getTargetValidatorConstraints(t.validator);if(r.length>1)throw"More than one implementation of ValidatorConstraintInterface found for validator on: ".concat(t.target.name,":").concat(t.propertyName)}else{var n=t.validator;e=function(){function o(){}return o.prototype.validate=function(a,d){return n.validate(a,d)},o.prototype.defaultMessage=function(a){return n.defaultMessage?n.defaultMessage(a):""},o}(),we().addConstraintMetadata(new Xi(e,t.name,t.async))}var i={type:t.name&&W.isValid(t.name)?t.name:W.CUSTOM_VALIDATION,name:t.name,target:t.target,propertyName:t.propertyName,validationOptions:t.options,constraintCls:e,constraints:t.constraints};we().addValidationMetadata(new Re(i))}var Sr=m(()=>{eo();dt();$e();$t();et()});function K(t,e){return function(r){var n=e&&e.each?"each value in ":"";return t(n,r)}}function J(t,e){return function(r,n){mt({name:t.name,target:r.constructor,propertyName:n,options:e,constraints:t.constraints,validator:t.validator})}}var me=m(()=>{Sr()});var ph,to=m(()=>{$e();ph=W.IS_DEFINED});function F(t){return function(e,r){var n={type:W.CONDITIONAL_VALIDATION,target:e.constructor,propertyName:r,constraints:[function(i,o){return i[r]!==null&&i[r]!==void 0}],validationOptions:t};we().addValidationMetadata(new Re(n))}}var ro=m(()=>{$e();dt();et()});var no=m(()=>{});var io=m(()=>{});function Ir(t){var e=Ar({},t),r=e.each?"each value in ":"";return e.message=e.message||r+"nested property $property must be either object or array",function(n,i){var o={type:W.NESTED_VALIDATION,target:n.constructor,propertyName:i,validationOptions:e};we().addValidationMetadata(new Re(o))}}var Ar,oo=m(()=>{$e();dt();et();Ar=function(){return Ar=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ar.apply(this,arguments)}});var ao=m(()=>{});var so=m(()=>{});var uo=m(()=>{});var lo=m(()=>{});var co=m(()=>{});var fo=m(()=>{});var po=m(()=>{});function Bf(t){return t!==""&&t!==null&&t!==void 0}function ae(t){return J({name:kf,validator:{validate:function(e,r){return Bf(e)},defaultMessage:K(function(e){return e+"$property should not be empty"},t)}},t)}var kf,mo=m(()=>{me();kf="isNotEmpty"});function Uf(t,e){return Array.isArray(e)&&e.some(function(r){return r===t})}function Nr(t,e){return J({name:Ff,constraints:[t],validator:{validate:function(r,n){return Uf(r,n?.constraints[0])},defaultMessage:K(function(r){return r+"$property must be one of the following values: $constraint1"},e)}},e)}var Ff,ho=m(()=>{me();Ff="isIn"});var vo=m(()=>{});var go=m(()=>{});var yo=m(()=>{});var bo=m(()=>{});var Eo=m(()=>{});var _o=m(()=>{});var xo=m(()=>{});var wo=m(()=>{});var So=m(()=>{});var Ao=m(()=>{});var Io=m(()=>{});var No=m(()=>{});var Co=m(()=>{});var Oo=m(()=>{});var Mo=m(()=>{});var Ro=m(()=>{});var To=m(()=>{});var Po=m(()=>{});var Do=m(()=>{});var Vo=m(()=>{});var Lo=m(()=>{});var ko=m(()=>{});var Bo=m(()=>{});var Fo=m(()=>{});var Uo=m(()=>{});var Ho=m(()=>{});var $o=m(()=>{});var jo=m(()=>{});var Go=m(()=>{});var zo=m(()=>{});var qo=m(()=>{});var Yo=m(()=>{});var Wo=m(()=>{});var Ko=m(()=>{});var Jo=m(()=>{});var Qo=m(()=>{});var Zo=k((ht,Cr)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.default=Hf;function jt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jt=function(r){return typeof r}:jt=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jt(t)}function Hf(t){var e=typeof t=="string"||t instanceof String;if(!e){var r=jt(t);throw t===null?r="null":r==="object"&&(r=t.constructor.name),new TypeError("Expected a string but received a ".concat(r))}}Cr.exports=ht.default;Cr.exports.default=ht.default});var ea=k(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.default=Gf;vt.CountryCodes=void 0;var $f=jf(Zo());function jf(t){return t&&t.__esModule?t:{default:t}}var Xo=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function Gf(t){return(0,$f.default)(t),Xo.has(t.toUpperCase())}var zf=Xo;vt.CountryCodes=zf});function Yf(t){return typeof t=="string"&&(0,ta.default)(t)}function Or(t){return J({name:qf,validator:{validate:function(e,r){return Yf(e)},defaultMessage:K(function(e){return e+"$property must be a valid ISO31661 Alpha2 code"},t)}},t)}var ta,qf,ra=m(()=>{me();ta=le(ea()),qf="isISO31661Alpha2"});var na=m(()=>{});var ia=m(()=>{});var oa=m(()=>{});var aa=m(()=>{});var sa=m(()=>{});var ua=m(()=>{});var la=m(()=>{});var ca=m(()=>{});var fa=m(()=>{});var da=m(()=>{});var pa=m(()=>{});var ma=m(()=>{});var ha=m(()=>{});var va=m(()=>{});var ga=m(()=>{});var ya=m(()=>{});var ba=m(()=>{});var Ea=m(()=>{});var _a=m(()=>{});var xa=m(()=>{});var wa=m(()=>{});var Sa=m(()=>{});var Aa=m(()=>{});var Ia=m(()=>{});var Na=m(()=>{});var Ca=m(()=>{});var Oa=m(()=>{});var Ma=m(()=>{});var Ra=m(()=>{});var Ta=m(()=>{});var Pa=m(()=>{});var Da=m(()=>{});var Va=m(()=>{});var La=m(()=>{});var ka=m(()=>{});var Ba=m(()=>{});var Fa=m(()=>{});var Ua=m(()=>{});var Ha=m(()=>{});var $a=m(()=>{});var ja=m(()=>{});var Ga=m(()=>{});var za=m(()=>{});function Kf(t){return t instanceof Boolean||typeof t=="boolean"}function Gt(t){return J({name:Wf,validator:{validate:function(e,r){return Kf(e)},defaultMessage:K(function(e){return e+"$property must be a boolean value"},t)}},t)}var Wf,qa=m(()=>{me();Wf="isBoolean"});function Qf(t){return t instanceof Date&&!isNaN(t.getTime())}function gt(t){return J({name:Jf,validator:{validate:function(e,r){return Qf(e)},defaultMessage:K(function(e){return e+"$property must be a Date instance"},t)}},t)}var Jf,Ya=m(()=>{me();Jf="isDate"});function Xf(t,e){if(e===void 0&&(e={}),typeof t!="number")return!1;if(t===1/0||t===-1/0)return!!e.allowInfinity;if(Number.isNaN(t))return!!e.allowNaN;if(e.maxDecimalPlaces!==void 0){var r=0;if(t%1!==0&&(r=t.toString().split(".")[1].length),r>e.maxDecimalPlaces)return!1}return Number.isFinite(t)}function Te(t,e){return t===void 0&&(t={}),J({name:Zf,constraints:[t],validator:{validate:function(r,n){return Xf(r,n?.constraints[0])},defaultMessage:K(function(r){return r+"$property must be a number conforming to the specified constraints"},e)}},e)}var Zf,Wa=m(()=>{me();Zf="isNumber"});var Ka=m(()=>{});var Ja=m(()=>{});function td(t){return t instanceof String||typeof t=="string"}function $(t){return J({name:ed,validator:{validate:function(e,r){return td(e)},defaultMessage:K(function(e){return e+"$property must be a string"},t)}},t)}var ed,Qa=m(()=>{me();ed="isString"});function nd(t){return Array.isArray(t)}function Za(t){return J({name:rd,validator:{validate:function(e,r){return nd(e)},defaultMessage:K(function(e){return e+"$property must be an array"},t)}},t)}var rd,Xa=m(()=>{me();rd="isArray"});function od(t){return t!=null&&(typeof t=="object"||typeof t=="function")&&!Array.isArray(t)}function es(t){return J({name:id,validator:{validate:function(e,r){return od(e)},defaultMessage:K(function(e){return e+"$property must be an object"},t)}},t)}var id,ts=m(()=>{me();id="isObject"});var rs=m(()=>{});var ns=m(()=>{});var is=m(()=>{});var os=m(()=>{});var as=m(()=>{});var ss=m(()=>{});var us=m(()=>{});var ls=m(()=>{});var cs=m(()=>{Zi();to();ro();no();me();io();oo();ao();so();uo();lo();co();fo();po();mo();ho();vo();go();yo();bo();Eo();_o();xo();wo();So();Ao();Io();No();Co();Oo();Mo();Ro();To();Po();Do();Vo();Lo();ko();Bo();Fo();Uo();$o();jo();Go();zo();qo();Yo();Wo();Ko();Jo();Qo();ra();na();ia();oa();aa();sa();ua();la();ca();fa();da();pa();ma();ha();va();ga();ya();ba();Ea();_a();xa();wa();Sa();Aa();Ia();Na();Ca();Oa();Ma();Ra();Ta();Pa();Da();Va();La();ka();Ba();Fa();Ua();Ha();$a();ja();Ga();za();qa();Ya();Wa();Ka();Ja();Qa();Xa();ts();rs();ns();is();os();as();ss();us();ls()});var fs=m(()=>{});var ds=m(()=>{});var ps=m(()=>{});var ms=m(()=>{});var hs=m(()=>{$t();cs();Ho();fs();xr();ds();ps();$e();Ji();ms();Sr();et()});var D,vs=m(()=>{(function(t){t[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(D||(D={}))});var yt=m(()=>{vs()});var gs,ys=m(()=>{yt();gs=function(){function t(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return t.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},t.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},t.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},t.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},t.prototype.findTransformMetadatas=function(e,r,n){return this.findMetadatas(this._transformMetadatas,e,r).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?n===D.CLASS_TO_CLASS||n===D.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?n===D.CLASS_TO_PLAIN:!0})},t.prototype.findExcludeMetadata=function(e,r){return this.findMetadata(this._excludeMetadatas,e,r)},t.prototype.findExposeMetadata=function(e,r){return this.findMetadata(this._exposeMetadatas,e,r)},t.prototype.findExposeMetadataByCustomName=function(e,r){return this.getExposedMetadatas(e).find(function(n){return n.options&&n.options.name===r})},t.prototype.findTypeMetadata=function(e,r){return this.findMetadata(this._typeMetadatas,e,r)},t.prototype.getStrategy=function(e){var r=this._excludeMetadatas.get(e),n=r&&r.get(void 0),i=this._exposeMetadatas.get(e),o=i&&i.get(void 0);return n&&o||!n&&!o?"none":n?"excludeAll":"exposeAll"},t.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},t.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},t.prototype.getExposedProperties=function(e,r){return this.getExposedMetadatas(e).filter(function(n){return!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?r===D.CLASS_TO_CLASS||r===D.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?r===D.CLASS_TO_PLAIN:!0}).map(function(n){return n.propertyName})},t.prototype.getExcludedProperties=function(e,r){return this.getExcludedMetadatas(e).filter(function(n){return!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?r===D.CLASS_TO_CLASS||r===D.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?r===D.CLASS_TO_PLAIN:!0}).map(function(n){return n.propertyName})},t.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},t.prototype.getMetadata=function(e,r){var n=e.get(r),i;n&&(i=Array.from(n.values()).filter(function(l){return l.propertyName!==void 0}));for(var o=[],a=0,d=this.getAncestors(r);a<d.length;a++){var c=d[a],f=e.get(c);if(f){var s=Array.from(f.values()).filter(function(l){return l.propertyName!==void 0});o.push.apply(o,s)}}return o.concat(i||[])},t.prototype.findMetadata=function(e,r,n){var i=e.get(r);if(i){var o=i.get(n);if(o)return o}for(var a=0,d=this.getAncestors(r);a<d.length;a++){var c=d[a],f=e.get(c);if(f){var s=f.get(n);if(s)return s}}},t.prototype.findMetadatas=function(e,r,n){var i=e.get(r),o;i&&(o=i.get(n));for(var a=[],d=0,c=this.getAncestors(r);d<c.length;d++){var f=c[d],s=e.get(f);s&&s.has(n)&&a.push.apply(a,s.get(n))}return a.slice().reverse().concat((o||[]).slice().reverse())},t.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var r=[],n=Object.getPrototypeOf(e.prototype.constructor);typeof n.prototype<"u";n=Object.getPrototypeOf(n.prototype.constructor))r.push(n);this._ancestorsMap.set(e,r)}return this._ancestorsMap.get(e)},t}()});var Z,zt=m(()=>{ys();Z=new gs});function bs(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}var Es=m(()=>{});function _s(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var xs=m(()=>{});var ws=m(()=>{Es();xs()});function ad(t){var e=new t;return!(e instanceof Set)&&!("push"in e)?[]:e}var Ss,je,As=m(()=>{zt();yt();ws();Ss=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};je=function(){function t(e,r){this.transformationType=e,this.options=r,this.recursionStack=new Set}return t.prototype.transform=function(e,r,n,i,o,a){var d=this;if(a===void 0&&(a=0),Array.isArray(r)||r instanceof Set){var c=i&&this.transformationType===D.PLAIN_TO_CLASS?ad(i):[];return r.forEach(function(A,g){var E=e?e[g]:void 0;if(!d.options.enableCircularCheck||!d.isCircular(A)){var N=void 0;if(typeof n!="function"&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(d.transformationType===D.PLAIN_TO_CLASS){N=n.options.discriminator.subTypes.find(function(z){return z.name===A[n.options.discriminator.property]});var _={newObject:c,object:A,property:void 0},M=n.typeFunction(_);N===void 0?N=M:N=N.value,n.options.keepDiscriminatorProperty||delete A[n.options.discriminator.property]}d.transformationType===D.CLASS_TO_CLASS&&(N=A.constructor),d.transformationType===D.CLASS_TO_PLAIN&&(A[n.options.discriminator.property]=n.options.discriminator.subTypes.find(function(z){return z.value===A.constructor}).name)}else N=n;var V=d.transform(E,A,N,void 0,A instanceof Map,a+1);c instanceof Set?c.add(V):c.push(V)}else d.transformationType===D.CLASS_TO_CLASS&&(c instanceof Set?c.add(A):c.push(A))}),c}else{if(n===String&&!o)return r==null?r:String(r);if(n===Number&&!o)return r==null?r:Number(r);if(n===Boolean&&!o)return r==null?r:!!r;if((n===Date||r instanceof Date)&&!o)return r instanceof Date?new Date(r.valueOf()):r==null?r:new Date(r);if(bs().Buffer&&(n===Buffer||r instanceof Buffer)&&!o)return r==null?r:Buffer.from(r);if(_s(r)&&!o)return new Promise(function(A,g){r.then(function(E){return A(d.transform(void 0,E,n,void 0,void 0,a+1))},g)});if(!o&&r!==null&&typeof r=="object"&&typeof r.then=="function")return r;if(typeof r=="object"&&r!==null){!n&&r.constructor!==Object&&(!Array.isArray(r)&&r.constructor===Array||(n=r.constructor)),!n&&e&&(n=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(r);var f=this.getKeys(n,r,o),s=e||{};!e&&(this.transformationType===D.PLAIN_TO_CLASS||this.transformationType===D.CLASS_TO_CLASS)&&(o?s=new Map:n?s=new n:s={});for(var l=function(A){if(A==="__proto__"||A==="constructor")return"continue";var g=A,E=A,N=A;if(!u.options.ignoreDecorators&&n){if(u.transformationType===D.PLAIN_TO_CLASS){var _=Z.findExposeMetadataByCustomName(n,A);_&&(N=_.propertyName,E=_.propertyName)}else if(u.transformationType===D.CLASS_TO_PLAIN||u.transformationType===D.CLASS_TO_CLASS){var _=Z.findExposeMetadata(n,A);_&&_.options&&_.options.name&&(E=_.options.name)}}var M=void 0;u.transformationType===D.PLAIN_TO_CLASS?M=r[g]:r instanceof Map?M=r.get(g):r[g]instanceof Function?M=r[g]():M=r[g];var V=void 0,z=M instanceof Map;if(n&&o)V=n;else if(n){var U=Z.findTypeMetadata(n,N);if(U){var Ne={newObject:s,object:r,property:N},ge=U.typeFunction?U.typeFunction(Ne):U.reflectedType;U.options&&U.options.discriminator&&U.options.discriminator.property&&U.options.discriminator.subTypes?r[g]instanceof Array?V=U:(u.transformationType===D.PLAIN_TO_CLASS&&(V=U.options.discriminator.subTypes.find(function(ee){if(M&&M instanceof Object&&U.options.discriminator.property in M)return ee.name===M[U.options.discriminator.property]}),V===void 0?V=ge:V=V.value,U.options.keepDiscriminatorProperty||M&&M instanceof Object&&U.options.discriminator.property in M&&delete M[U.options.discriminator.property]),u.transformationType===D.CLASS_TO_CLASS&&(V=M.constructor),u.transformationType===D.CLASS_TO_PLAIN&&M&&(M[U.options.discriminator.property]=U.options.discriminator.subTypes.find(function(ee){return ee.value===M.constructor}).name)):V=ge,z=z||U.reflectedType===Map}else if(u.options.targetMaps)u.options.targetMaps.filter(function(ee){return ee.target===n&&!!ee.properties[N]}).forEach(function(ee){return V=ee.properties[N]});else if(u.options.enableImplicitConversion&&u.transformationType===D.PLAIN_TO_CLASS){var se=Reflect.getMetadata("design:type",n.prototype,N);se&&(V=se)}}var oe=Array.isArray(r[g])?u.getReflectedType(n,N):void 0,Ve=e?e[g]:void 0;if(s.constructor.prototype){var de=Object.getOwnPropertyDescriptor(s.constructor.prototype,E);if((u.transformationType===D.PLAIN_TO_CLASS||u.transformationType===D.CLASS_TO_CLASS)&&(de&&!de.set||s[E]instanceof Function))return"continue"}if(!u.options.enableCircularCheck||!u.isCircular(M)){var ue=u.transformationType===D.PLAIN_TO_CLASS?E:A,j=void 0;u.transformationType===D.CLASS_TO_PLAIN?(j=r[ue],j=u.applyCustomTransformations(j,n,ue,r,u.transformationType),j=r[ue]===j?M:j,j=u.transform(Ve,j,V,oe,z,a+1)):M===void 0&&u.options.exposeDefaultValues?j=s[E]:(j=u.transform(Ve,M,V,oe,z,a+1),j=u.applyCustomTransformations(j,n,ue,r,u.transformationType)),(j!==void 0||u.options.exposeUnsetFields)&&(s instanceof Map?s.set(E,j):s[E]=j)}else if(u.transformationType===D.CLASS_TO_CLASS){var j=M;j=u.applyCustomTransformations(j,n,A,r,u.transformationType),(j!==void 0||u.options.exposeUnsetFields)&&(s instanceof Map?s.set(E,j):s[E]=j)}},u=this,v=0,y=f;v<y.length;v++){var S=y[v];l(S)}return this.options.enableCircularCheck&&this.recursionStack.delete(r),s}else return r}},t.prototype.applyCustomTransformations=function(e,r,n,i,o){var a=this,d=Z.findTransformMetadatas(r,n,this.transformationType);return this.options.version!==void 0&&(d=d.filter(function(c){return c.options?a.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?d=d.filter(function(c){return c.options?a.checkGroups(c.options.groups):!0}):d=d.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),d.forEach(function(c){e=c.transformFn({value:e,key:n,obj:i,type:o,options:a.options})}),e},t.prototype.isCircular=function(e){return this.recursionStack.has(e)},t.prototype.getReflectedType=function(e,r){if(e){var n=Z.findTypeMetadata(e,r);return n?n.reflectedType:void 0}},t.prototype.getKeys=function(e,r,n){var i=this,o=Z.getStrategy(e);o==="none"&&(o=this.options.strategy||"exposeAll");var a=[];if((o==="exposeAll"||n)&&(r instanceof Map?a=Array.from(r.keys()):a=Object.keys(r)),n)return a;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){var d=Z.getExposedProperties(e,this.transformationType),c=Z.getExcludedProperties(e,this.transformationType);a=Ss(Ss([],d,!0),c,!0)}if(!this.options.ignoreDecorators&&e){var d=Z.getExposedProperties(e,this.transformationType);this.transformationType===D.PLAIN_TO_CLASS&&(d=d.map(function(l){var u=Z.findExposeMetadata(e,l);return u&&u.options&&u.options.name?u.options.name:l})),this.options.excludeExtraneousValues?a=d:a=a.concat(d);var f=Z.getExcludedProperties(e,this.transformationType);f.length>0&&(a=a.filter(function(l){return!f.includes(l)})),this.options.version!==void 0&&(a=a.filter(function(l){var u=Z.findExposeMetadata(e,l);return!u||!u.options?!0:i.checkVersion(u.options.since,u.options.until)})),this.options.groups&&this.options.groups.length?a=a.filter(function(l){var u=Z.findExposeMetadata(e,l);return!u||!u.options?!0:i.checkGroups(u.options.groups)}):a=a.filter(function(l){var u=Z.findExposeMetadata(e,l);return!u||!u.options||!u.options.groups||!u.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter(function(s){return i.options.excludePrefixes.every(function(l){return s.substr(0,l.length)!==l})})),a=a.filter(function(s,l,u){return u.indexOf(s)===l}),a},t.prototype.checkVersion=function(e,r){var n=!0;return n&&e&&(n=this.options.version>=e),n&&r&&(n=this.options.version<r),n},t.prototype.checkGroups=function(e){return e?this.options.groups.some(function(r){return e.includes(r)}):!0},t}()});var Ge,Is=m(()=>{Ge={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0}});var ne,Ns,Cs=m(()=>{As();yt();Is();ne=function(){return ne=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ne.apply(this,arguments)},Ns=function(){function t(){}return t.prototype.instanceToPlain=function(e,r){var n=new je(D.CLASS_TO_PLAIN,ne(ne({},Ge),r));return n.transform(void 0,e,void 0,void 0,void 0,void 0)},t.prototype.classToPlainFromExist=function(e,r,n){var i=new je(D.CLASS_TO_PLAIN,ne(ne({},Ge),n));return i.transform(r,e,void 0,void 0,void 0,void 0)},t.prototype.plainToInstance=function(e,r,n){var i=new je(D.PLAIN_TO_CLASS,ne(ne({},Ge),n));return i.transform(void 0,r,e,void 0,void 0,void 0)},t.prototype.plainToClassFromExist=function(e,r,n){var i=new je(D.PLAIN_TO_CLASS,ne(ne({},Ge),n));return i.transform(e,r,void 0,void 0,void 0,void 0)},t.prototype.instanceToInstance=function(e,r){var n=new je(D.CLASS_TO_CLASS,ne(ne({},Ge),r));return n.transform(void 0,e,void 0,void 0,void 0,void 0)},t.prototype.classToClassFromExist=function(e,r,n){var i=new je(D.CLASS_TO_CLASS,ne(ne({},Ge),n));return i.transform(r,e,void 0,void 0,void 0,void 0)},t.prototype.serialize=function(e,r){return JSON.stringify(this.instanceToPlain(e,r))},t.prototype.deserialize=function(e,r,n){var i=JSON.parse(r);return this.plainToInstance(e,i,n)},t.prototype.deserializeArray=function(e,r,n){var i=JSON.parse(r);return this.plainToInstance(e,i,n)},t}()});var Os=m(()=>{});var Ms=m(()=>{});var Rs=m(()=>{});var Ts=m(()=>{});var Ps=m(()=>{});function ie(t,e){return e===void 0&&(e={}),function(r,n){Z.addTransformMetadata({target:r.constructor,propertyName:n,transformFn:t,options:e})}}var Ds=m(()=>{zt()});function ce(t,e){return e===void 0&&(e={}),function(r,n){var i=Reflect.getMetadata("design:type",r,n);Z.addTypeMetadata({target:r.constructor,propertyName:n,reflectedType:i,typeFunction:t,options:e})}}var Vs=m(()=>{zt()});var Ls=m(()=>{Os();Ms();Rs();Ts();Ps();Ds();Vs()});var ks=m(()=>{});var Bs=m(()=>{});var Fs=m(()=>{});var Us=m(()=>{});var Hs=m(()=>{});var $s=m(()=>{});var js=m(()=>{});var Gs=m(()=>{});var zs=m(()=>{});var qs=m(()=>{});var Ys=m(()=>{});var Ws=m(()=>{});var Ks=m(()=>{});var Js=m(()=>{});var Qs=m(()=>{ks();Bs();Fs();Us();Hs();$s();js();Gs();zs();qs();Ys();Ws();Ks();Js()});var WE,Zs=m(()=>{Cs();Ls();Qs();yt();WE=new Ns});var Xs,eu=m(()=>{(function(t){(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(t);typeof r.Reflect>"u"?r.Reflect=t:n=i(r.Reflect,n),e(n);function i(o,a){return function(d,c){typeof o[d]!="function"&&Object.defineProperty(o,d,{configurable:!0,writable:!0,value:c}),a&&a(d,c)}}})(function(e){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",d={__proto__:[]}instanceof Array,c=!a&&!d,f={create:a?function(){return L(Object.create(null))}:d?function(){return L({__proto__:null})}:function(){return L({})},has:c?function(p,h){return r.call(p,h)}:function(p,h){return h in p},get:c?function(p,h){return r.call(p,h)?p[h]:void 0}:function(p,h){return p[h]}},s=Object.getPrototypeOf(Function),l=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",u=!l&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:te(),v=!l&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Oe(),y=!l&&typeof WeakMap=="function"?WeakMap:Qe(),S=new y;function A(p,h,b,w){if(G(b)){if(!ke(p))throw new TypeError;if(!Ce(h))throw new TypeError;return ge(p,h)}else{if(!ke(p))throw new TypeError;if(!q(h))throw new TypeError;if(!q(w)&&!G(w)&&!ye(w))throw new TypeError;return ye(w)&&(w=void 0),b=pe(b),se(p,h,b,w)}}e("decorate",A);function g(p,h){function b(w,I){if(!q(w))throw new TypeError;if(!G(I)&&!nr(I))throw new TypeError;ee(p,h,w,I)}return b}e("metadata",g);function E(p,h,b,w){if(!q(b))throw new TypeError;return G(w)||(w=pe(w)),ee(p,h,b,w)}e("defineMetadata",E);function N(p,h,b){if(!q(h))throw new TypeError;return G(b)||(b=pe(b)),Ve(p,h,b)}e("hasMetadata",N);function _(p,h,b){if(!q(h))throw new TypeError;return G(b)||(b=pe(b)),de(p,h,b)}e("hasOwnMetadata",_);function M(p,h,b){if(!q(h))throw new TypeError;return G(b)||(b=pe(b)),ue(p,h,b)}e("getMetadata",M);function V(p,h,b){if(!q(h))throw new TypeError;return G(b)||(b=pe(b)),j(p,h,b)}e("getOwnMetadata",V);function z(p,h){if(!q(p))throw new TypeError;return G(h)||(h=pe(h)),Ye(p,h)}e("getMetadataKeys",z);function U(p,h){if(!q(p))throw new TypeError;return G(h)||(h=pe(h)),ot(p,h)}e("getOwnMetadataKeys",U);function Ne(p,h,b){if(!q(h))throw new TypeError;G(b)||(b=pe(b));var w=oe(h,b,!1);if(G(w)||!w.delete(p))return!1;if(w.size>0)return!0;var I=S.get(h);return I.delete(b),I.size>0||S.delete(h),!0}e("deleteMetadata",Ne);function ge(p,h){for(var b=p.length-1;b>=0;--b){var w=p[b],I=w(h);if(!G(I)&&!ye(I)){if(!Ce(I))throw new TypeError;h=I}}return h}function se(p,h,b,w){for(var I=p.length-1;I>=0;--I){var P=p[I],x=P(h,b,w);if(!G(x)&&!ye(x)){if(!q(x))throw new TypeError;w=x}}return w}function oe(p,h,b){var w=S.get(p);if(G(w)){if(!b)return;w=new u,S.set(p,w)}var I=w.get(h);if(G(I)){if(!b)return;I=new u,w.set(h,I)}return I}function Ve(p,h,b){var w=de(p,h,b);if(w)return!0;var I=Je(h);return ye(I)?!1:Ve(p,I,b)}function de(p,h,b){var w=oe(h,b,!1);return G(w)?!1:Nt(w.has(p))}function ue(p,h,b){var w=de(p,h,b);if(w)return j(p,h,b);var I=Je(h);if(!ye(I))return ue(p,I,b)}function j(p,h,b){var w=oe(h,b,!1);if(!G(w))return w.get(p)}function ee(p,h,b,w){var I=oe(b,w,!0);I.set(p,h)}function Ye(p,h){var b=ot(p,h),w=Je(p);if(w===null)return b;var I=Ye(w,h);if(I.length<=0)return b;if(b.length<=0)return I;for(var P=new v,x=[],T=0,R=b;T<R.length;T++){var B=R[T],H=P.has(B);H||(P.add(B),x.push(B))}for(var Me=0,Zr=I;Me<Zr.length;Me++){var B=Zr[Me],H=P.has(B);H||(P.add(B),x.push(B))}return x}function ot(p,h){var b=[],w=oe(p,h,!1);if(G(w))return b;for(var I=w.keys(),P=Be(I),x=0;;){var T=ir(P);if(!T)return b.length=x,b;var R=st(T);try{b[x]=R}catch(B){try{Ot(P)}finally{throw B}}x++}}function Le(p){if(p===null)return 1;switch(typeof p){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return p===null?1:6;default:return 6}}function G(p){return p===void 0}function ye(p){return p===null}function We(p){return typeof p=="symbol"}function q(p){return typeof p=="object"?p!==null:typeof p=="function"}function at(p,h){switch(Le(p)){case 0:return p;case 1:return p;case 2:return p;case 3:return p;case 4:return p;case 5:return p}var b=h===3?"string":h===5?"number":"default",w=Ke(p,i);if(w!==void 0){var I=w.call(p,b);if(q(I))throw new TypeError;return I}return It(p,b==="default"?"number":b)}function It(p,h){if(h==="string"){var b=p.toString;if(be(b)){var w=b.call(p);if(!q(w))return w}var I=p.valueOf;if(be(I)){var w=I.call(p);if(!q(w))return w}}else{var I=p.valueOf;if(be(I)){var w=I.call(p);if(!q(w))return w}var P=p.toString;if(be(P)){var w=P.call(p);if(!q(w))return w}}throw new TypeError}function Nt(p){return!!p}function Ct(p){return""+p}function pe(p){var h=at(p,3);return We(h)?h:Ct(h)}function ke(p){return Array.isArray?Array.isArray(p):p instanceof Object?p instanceof Array:Object.prototype.toString.call(p)==="[object Array]"}function be(p){return typeof p=="function"}function Ce(p){return typeof p=="function"}function nr(p){switch(Le(p)){case 3:return!0;case 4:return!0;default:return!1}}function Ke(p,h){var b=p[h];if(b!=null){if(!be(b))throw new TypeError;return b}}function Be(p){var h=Ke(p,o);if(!be(h))throw new TypeError;var b=h.call(p);if(!q(b))throw new TypeError;return b}function st(p){return p.value}function ir(p){var h=p.next();return h.done?!1:h}function Ot(p){var h=p.return;h&&h.call(p)}function Je(p){var h=Object.getPrototypeOf(p);if(typeof p!="function"||p===s||h!==s)return h;var b=p.prototype,w=b&&Object.getPrototypeOf(b);if(w==null||w===Object.prototype)return h;var I=w.constructor;return typeof I!="function"||I===p?h:I}function te(){var p={},h=[],b=function(){function x(T,R,B){this._index=0,this._keys=T,this._values=R,this._selector=B}return x.prototype["@@iterator"]=function(){return this},x.prototype[o]=function(){return this},x.prototype.next=function(){var T=this._index;if(T>=0&&T<this._keys.length){var R=this._selector(this._keys[T],this._values[T]);return T+1>=this._keys.length?(this._index=-1,this._keys=h,this._values=h):this._index++,{value:R,done:!1}}return{value:void 0,done:!0}},x.prototype.throw=function(T){throw this._index>=0&&(this._index=-1,this._keys=h,this._values=h),T},x.prototype.return=function(T){return this._index>=0&&(this._index=-1,this._keys=h,this._values=h),{value:T,done:!0}},x}();return function(){function x(){this._keys=[],this._values=[],this._cacheKey=p,this._cacheIndex=-2}return Object.defineProperty(x.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),x.prototype.has=function(T){return this._find(T,!1)>=0},x.prototype.get=function(T){var R=this._find(T,!1);return R>=0?this._values[R]:void 0},x.prototype.set=function(T,R){var B=this._find(T,!0);return this._values[B]=R,this},x.prototype.delete=function(T){var R=this._find(T,!1);if(R>=0){for(var B=this._keys.length,H=R+1;H<B;H++)this._keys[H-1]=this._keys[H],this._values[H-1]=this._values[H];return this._keys.length--,this._values.length--,T===this._cacheKey&&(this._cacheKey=p,this._cacheIndex=-2),!0}return!1},x.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=p,this._cacheIndex=-2},x.prototype.keys=function(){return new b(this._keys,this._values,w)},x.prototype.values=function(){return new b(this._keys,this._values,I)},x.prototype.entries=function(){return new b(this._keys,this._values,P)},x.prototype["@@iterator"]=function(){return this.entries()},x.prototype[o]=function(){return this.entries()},x.prototype._find=function(T,R){return this._cacheKey!==T&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=T)),this._cacheIndex<0&&R&&(this._cacheIndex=this._keys.length,this._keys.push(T),this._values.push(void 0)),this._cacheIndex},x}();function w(x,T){return x}function I(x,T){return T}function P(x,T){return[x,T]}}function Oe(){return function(){function p(){this._map=new u}return Object.defineProperty(p.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),p.prototype.has=function(h){return this._map.has(h)},p.prototype.add=function(h){return this._map.set(h,h),this},p.prototype.delete=function(h){return this._map.delete(h)},p.prototype.clear=function(){this._map.clear()},p.prototype.keys=function(){return this._map.keys()},p.prototype.values=function(){return this._map.values()},p.prototype.entries=function(){return this._map.entries()},p.prototype["@@iterator"]=function(){return this.keys()},p.prototype[o]=function(){return this.keys()},p}()}function Qe(){var p=16,h=f.create(),b=w();return function(){function R(){this._key=w()}return R.prototype.has=function(B){var H=I(B,!1);return H!==void 0?f.has(H,this._key):!1},R.prototype.get=function(B){var H=I(B,!1);return H!==void 0?f.get(H,this._key):void 0},R.prototype.set=function(B,H){var Me=I(B,!0);return Me[this._key]=H,this},R.prototype.delete=function(B){var H=I(B,!1);return H!==void 0?delete H[this._key]:!1},R.prototype.clear=function(){this._key=w()},R}();function w(){var R;do R="@@WeakMap@@"+T();while(f.has(h,R));return h[R]=!0,R}function I(R,B){if(!r.call(R,b)){if(!B)return;Object.defineProperty(R,b,{value:f.create()})}return R[b]}function P(R,B){for(var H=0;H<B;++H)R[H]=Math.random()*255|0;return R}function x(R){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(R)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(R)):P(new Uint8Array(R),R):P(new Array(R),R)}function T(){var R=x(p);R[6]=R[6]&79|64,R[8]=R[8]&191|128;for(var B="",H=0;H<p;++H){var Me=R[H];(H===4||H===6||H===8)&&(B+="-"),Me<16&&(B+="0"),B+=Me.toString(16).toLowerCase()}return B}}function L(p){return p.__=void 0,delete p.__,p}})})(Xs||(Xs={}))});var Mr=k((XE,tu)=>{var sd=He(),ud=Xe(),ld="[object Number]";function cd(t){return typeof t=="number"||ud(t)&&sd(t)==ld}tu.exports=cd});var nu=k((e_,ru)=>{var fd=He(),dd=Xe(),pd="[object Boolean]";function md(t){return t===!0||t===!1||dd(t)&&fd(t)==pd}ru.exports=md});var ou=k((t_,iu)=>{function hd(t,e){return function(r){return t(e(r))}}iu.exports=hd});var su=k((r_,au)=>{var vd=ou(),gd=vd(Object.getPrototypeOf,Object);au.exports=gd});var cu=k((n_,lu)=>{var yd=He(),bd=su(),Ed=Xe(),_d="[object Object]",xd=Function.prototype,wd=Object.prototype,uu=xd.toString,Sd=wd.hasOwnProperty,Ad=uu.call(Object);function Id(t){if(!Ed(t)||yd(t)!=_d)return!1;var e=bd(t);if(e===null)return!0;var r=Sd.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&uu.call(r)==Ad}lu.exports=Id});var du=k((i_,fu)=>{function Nd(t){return t===null}fu.exports=Nd});var mu=k((o_,pu)=>{function Cd(t){return t===void 0}pu.exports=Cd});var Od,Se,hu=m(()=>{Od={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"\u0430\u04A7\u0441\u0443\u0430 \u0431\u044B\u0437\u0448\u04D9\u0430"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"\u12A0\u121B\u122D\u129B"},an:{name:"Aragonese",nativeName:"aragon\xE9s"},ar:{name:"Arabic",nativeName:"\u0627\u064E\u0644\u0652\u0639\u064E\u0631\u064E\u0628\u0650\u064A\u064E\u0651\u0629\u064F"},as:{name:"Assamese",nativeName:"\u0985\u09B8\u09AE\u09C0\u09AF\u09BC\u09BE"},av:{name:"Avaric",nativeName:"\u0430\u0432\u0430\u0440 \u043C\u0430\u0446\u04C0"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"},ba:{name:"Bashkir",nativeName:"\u0431\u0430\u0448\u04A1\u043E\u0440\u0442 \u0442\u0435\u043B\u0435"},be:{name:"Belarusian",nativeName:"\u0431\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F \u043C\u043E\u0432\u0430"},bg:{name:"Bulgarian",nativeName:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"\u09AC\u09BE\u0982\u09B2\u09BE"},bo:{name:"Tibetan",nativeName:"\u0F56\u0F7C\u0F51\u0F0B\u0F61\u0F72\u0F42"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Catal\xE0"},ce:{name:"Chechen",nativeName:"\u043D\u043E\u0445\u0447\u0438\u0439\u043D \u043C\u043E\u0442\u0442"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"\u14C0\u1426\u1403\u152D\u140D\u140F\u1423"},cs:{name:"Czech",nativeName:"\u010De\u0161tina"},cu:{name:"Old Church Slavonic",nativeName:"\u0469\u0437\u044B\u043A\u044A \u0441\u043B\u043E\u0432\u0463\u043D\u044C\u0441\u043A\u044A"},cv:{name:"Chuvash",nativeName:"\u0447\u04D1\u0432\u0430\u0448 \u0447\u04D7\u043B\u0445\u0438"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"\u078B\u07A8\u0788\u07AC\u0780\u07A8"},dz:{name:"Dzongkha",nativeName:"\u0F62\u0FAB\u0F7C\u0F44\u0F0B\u0F41"},ee:{name:"Ewe",nativeName:"E\u028Begbe"},el:{name:"Greek",nativeName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Espa\xF1ol"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06CC"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fo:{name:"Faroese",nativeName:"f\xF8royskt"},fr:{name:"French",nativeName:"Fran\xE7ais"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"G\xE0idhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaran\xED",nativeName:"Ava\xF1e'\u1EBD"},gu:{name:"Gujarati",nativeName:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"\u0647\u064E\u0648\u064F\u0633\u064E"},he:{name:"Hebrew",nativeName:"\u05E2\u05D1\u05E8\u05D9\u05EA"},hi:{name:"Hindi",nativeName:"\u0939\u093F\u0928\u094D\u0926\u0940"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Krey\xF2l ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"As\u1EE5s\u1EE5 Igbo"},ii:{name:"Nuosu",nativeName:"\uA188\uA320\uA4BF Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"I\xF1upiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"\xCDslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"\u1403\u14C4\u1483\u144E\u1450\u1466"},ja:{name:"Japanese",nativeName:"\u65E5\u672C\u8A9E"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"G\u0129k\u0169y\u0169"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"\u049B\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"\u1781\u17C1\u1798\u179A\u1797\u17B6\u179F\u17B6"},kn:{name:"Kannada",nativeName:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},ko:{name:"Korean",nativeName:"\uD55C\uAD6D\uC5B4"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"\u0915\u0936\u094D\u092E\u0940\u0930\u0940"},ku:{name:"Kurdish",nativeName:"Kurd\xEE"},kv:{name:"Komi",nativeName:"\u043A\u043E\u043C\u0438 \u043A\u044B\u0432"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"\u041A\u044B\u0440\u0433\u044B\u0437\u0447\u0430"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"L\xEBtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Ling\xE1la"},lo:{name:"Lao",nativeName:"\u0E9E\u0EB2\u0EAA\u0EB2\u0EA5\u0EB2\u0EA7"},lt:{name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},lu:{name:"Luba-Katanga",nativeName:"Kiluba"},lv:{name:"Latvian",nativeName:"latvie\u0161u valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M\u0327aje\u013C"},mi:{name:"M\u0101ori",nativeName:"te reo M\u0101ori"},mk:{name:"Macedonian",nativeName:"\u043C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},ml:{name:"Malayalam",nativeName:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},mn:{name:"Mongolian",nativeName:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},mr:{name:"Marathi",nativeName:"\u092E\u0930\u093E\u0920\u0940"},ms:{name:"Malay",nativeName:"Bahasa Melayu"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"\u1017\u1019\u102C\u1005\u102C"},na:{name:"Nauru",nativeName:"Dorerin Naoero"},nb:{name:"Norwegian Bokm\xE5l",nativeName:"Norsk bokm\xE5l"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"\u0928\u0947\u092A\u093E\u0932\u0940"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Din\xE9 bizaad"},ny:{name:"Chichewa",nativeName:"chiChe\u0175a"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"\u140A\u14C2\u1511\u14C8\u142F\u14A7\u140E\u14D0"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},os:{name:"Ossetian",nativeName:"\u0438\u0440\u043E\u043D \xE6\u0432\u0437\u0430\u0433"},pa:{name:"Panjabi",nativeName:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},pi:{name:"P\u0101li",nativeName:"\u092A\u093E\u0934\u093F"},pl:{name:"Polish",nativeName:"Polski"},ps:{name:"Pashto",nativeName:"\u067E\u069A\u062A\u0648"},pt:{name:"Portuguese",nativeName:"Portugu\xEAs"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Rom\xE2n\u0103"},ru:{name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"\u0938\u0902\u0938\u094D\u0915\u0943\u0924\u092E\u094D"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"\u0938\u093F\u0928\u094D\u0927\u0940"},se:{name:"Northern Sami",nativeName:"Davvis\xE1megiella"},sg:{name:"Sango",nativeName:"y\xE2ng\xE2 t\xEE s\xE4ng\xF6"},si:{name:"Sinhala",nativeName:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},sk:{name:"Slovak",nativeName:"sloven\u010Dina"},sl:{name:"Slovenian",nativeName:"sloven\u0161\u010Dina"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"\u0441\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},te:{name:"Telugu",nativeName:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},tg:{name:"Tajik",nativeName:"\u0442\u043E\u04B7\u0438\u043A\u04E3"},th:{name:"Thai",nativeName:"\u0E44\u0E17\u0E22"},ti:{name:"Tigrinya",nativeName:"\u1275\u130D\u122D\u129B"},tk:{name:"Turkmen",nativeName:"T\xFCrkmen\xE7e"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"T\xFCrk\xE7e"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"\u0442\u0430\u0442\u0430\u0440 \u0442\u0435\u043B\u0435"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"\u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5\u200E"},uk:{name:"Ukrainian",nativeName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},ur:{name:"Urdu",nativeName:"\u0627\u0631\u062F\u0648"},uz:{name:"Uzbek",nativeName:"\u040E\u0437\u0431\u0435\u043A"},ve:{name:"Venda",nativeName:"Tshiven\u1E13a"},vi:{name:"Vietnamese",nativeName:"Ti\u1EBFng Vi\u1EC7t"},vo:{name:"Volap\xFCk",nativeName:"Volap\xFCk"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9"},yo:{name:"Yoruba",nativeName:"Yor\xF9b\xE1"},za:{name:"Zhuang",nativeName:"Sa\u026F cue\u014B\u0185"},zh:{name:"Chinese",nativeName:"\u4E2D\u6587"},zu:{name:"Zulu",nativeName:"isiZulu"}},Se=Od});var bt,vu=m(()=>{hu();bt=class t{static getLanguages(e=[]){return e.map(r=>({code:r,name:t.getName(r),nativeName:t.getNativeName(r)}))}static getName(e){return t.validate(e)?Se[e].name:""}static getAllNames(){return Object.values(Se).map(e=>e.name)}static getNativeName(e){return t.validate(e)?Se[e].nativeName:""}static getAllNativeNames(){return Object.values(Se).map(e=>e.nativeName)}static getCode(e){return Object.keys(Se).find(n=>{let i=Se[n];return i.name.toLowerCase()===e.toLowerCase()||i.nativeName.toLowerCase()===e.toLowerCase()})||""}static getAllCodes(){return Object.keys(Se)}static validate(e){return Se.hasOwnProperty(e)}}});function C(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var d=t.length-1;d>=0;d--)(a=t[d])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function O(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Jt(t){return function(e,r){mt({name:"isLongerThan",target:e.constructor,propertyName:r,options:t,validator:{validate:Md,defaultMessage(){return"$property must be a JSON Object with only string / number / boolean / null types"}}})}}function Md(t){if(!(0,Pu.default)(t))return!1;for(let e in t){if(!(0,Ae.default)(e))return!1;let r=t[e];if((0,Vu.default)(r)||!((0,Ae.default)(r)||(0,Ru.default)(r)||(0,Tu.default)(r)||(0,Du.default)(r)))return!1}return!0}function Dr(t){return function(e,r){mt({name:"isNotBlank",target:e.constructor,propertyName:r,options:t,validator:{validate:Rd}})}}function Rd(t){return typeof t=="string"&&t.trim().length>0}function Pd(t){return typeof t=="string"&&Dd(t)}function Lu(t){return J({name:Td,validator:{validate:(e,r)=>Pd(e),defaultMessage:K(e=>e+"$property must be a valid ISO6391 code",t)}},t)}function Dd(t){return bt.validate(t.toLocaleLowerCase())}function Vr(t,e,r,n){if(typeof t=="boolean")return tt.boolean;if(typeof t=="number")return tt.number;if(typeof t=="string")return tt.string;if(typeof t=="object")return tt.json;if(n)throw new Error(`The default value for variable ${e} is not of type Boolean, Number, String, or JSON`);return r.warn(`The default value for variable ${e} is not of type Boolean, Number, String, or JSON`),null}var Ae,Ru,Tu,Pu,Du,Vu,Td,ku,Qt,Y,Rr,Q,Tr,Pe,qt,gu,yu,bu,Eu,_u,xu,wu,Su,Au,Iu,Nu,Yt,rt,Wt,Et,Cu,Ou,Kt,Mu,tt,Pr,he,Bu=m(()=>{Ae=le(Bi());hs();Zs();eu();Ru=le(Mr()),Tu=le(nu()),Pu=le(cu()),Du=le(du()),Vu=le(mu());vu();Td="isISO6391";ku=({value:t})=>t==="true"?!0:t==="false"?!1:t,Qt=({value:t})=>{if(!t)return;let e=Number(t);return isNaN(e)?new Date(t):new Date(e)},Y=class{isAnonymous;user_id;email;name;language;country;appVersion;appBuild;customData;privateCustomData;createdDate;lastSeenDate;platform;platformVersion;deviceModel;sdkType="api";sdkVersion};C([Gt(),F(),ie(ku),O("design:type",Boolean)],Y.prototype,"isAnonymous",void 0);C([$(),Dr(),ae(),O("design:type",String)],Y.prototype,"user_id",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"email",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"name",void 0);C([Lu(),$(),F(),O("design:type",String)],Y.prototype,"language",void 0);C([Or(),F(),O("design:type",String)],Y.prototype,"country",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"appVersion",void 0);C([Te(),F(),ce(()=>Number),O("design:type",Number)],Y.prototype,"appBuild",void 0);C([Jt(),F(),ie(({value:t})=>(0,Ae.default)(t)?JSON.parse(t):t),O("design:type",Object)],Y.prototype,"customData",void 0);C([Jt(),F(),ie(({value:t})=>(0,Ae.default)(t)?JSON.parse(t):t),O("design:type",Object)],Y.prototype,"privateCustomData",void 0);C([gt(),F(),ie(Qt),O("design:type",Date)],Y.prototype,"createdDate",void 0);C([gt(),F(),ie(Qt),O("design:type",Date)],Y.prototype,"lastSeenDate",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"platform",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"platformVersion",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"deviceModel",void 0);C([$(),F(),Nr(["client","server","mobile","api"]),ie(({value:t})=>t),O("design:type",String)],Y.prototype,"sdkType",void 0);C([$(),F(),O("design:type",String)],Y.prototype,"sdkVersion",void 0);Rr=class extends Y{optIns};C([F(),ie(({value:t})=>(0,Ae.default)(t)?JSON.parse(t):t),O("design:type",Object)],Rr.prototype,"optIns",void 0);Q=class{isAnonymous;user_id;email;name;language;country;appVersion;appBuild;customData;privateCustomData;createdDate;lastSeenDate;platform;platformVersion;deviceModel;sdkType;sdkVersion;isDebug};C([Gt(),ie(ku),O("design:type",Boolean)],Q.prototype,"isAnonymous",void 0);C([$(),Dr(),ae(),O("design:type",String)],Q.prototype,"user_id",void 0);C([$(),F(),O("design:type",String)],Q.prototype,"email",void 0);C([$(),F(),O("design:type",String)],Q.prototype,"name",void 0);C([Lu(),$(),F(),O("design:type",String)],Q.prototype,"language",void 0);C([Or(),F(),O("design:type",String)],Q.prototype,"country",void 0);C([$(),F(),O("design:type",String)],Q.prototype,"appVersion",void 0);C([Te(),F(),ce(()=>Number),O("design:type",Number)],Q.prototype,"appBuild",void 0);C([Jt(),F(),ie(({value:t})=>(0,Ae.default)(t)?JSON.parse(t):t),O("design:type",Object)],Q.prototype,"customData",void 0);C([Jt(),F(),ie(({value:t})=>(0,Ae.default)(t)?JSON.parse(t):t),O("design:type",Object)],Q.prototype,"privateCustomData",void 0);C([gt(),ie(Qt),O("design:type",Date)],Q.prototype,"createdDate",void 0);C([gt(),ie(Qt),O("design:type",Date)],Q.prototype,"lastSeenDate",void 0);C([$(),ae(),O("design:type",String)],Q.prototype,"platform",void 0);C([$(),ae(),O("design:type",String)],Q.prototype,"platformVersion",void 0);C([$(),ae(),O("design:type",String)],Q.prototype,"deviceModel",void 0);C([$(),Nr(["client","mobile"]),O("design:type",String)],Q.prototype,"sdkType",void 0);C([$(),ae(),O("design:type",String)],Q.prototype,"sdkVersion",void 0);C([Gt(),F(),ie(({value:t})=>(0,Ae.default)(t)?t==="true":t),O("design:type",Boolean)],Q.prototype,"isDebug",void 0);Tr=class{user_id};C([$(),Dr(),ae(),O("design:type",String)],Tr.prototype,"user_id",void 0);Pe=class{type;target;date;value;metaData};C([ae(),$(),O("design:type",String)],Pe.prototype,"type",void 0);C([F(),$(),O("design:type",String)],Pe.prototype,"target",void 0);C([F(),Te(),O("design:type",Number)],Pe.prototype,"date",void 0);C([F(),Te(),O("design:type",Number)],Pe.prototype,"value",void 0);C([F(),es(),O("design:type",Object)],Pe.prototype,"metaData",void 0);qt=class{user;events};C([ae(),Ir(),ce(()=>Y),O("design:type",Y)],qt.prototype,"user",void 0);C([ae(),Za(),Ir({each:!0}),ce(()=>Pe),O("design:type",Array)],qt.prototype,"events",void 0);(function(t){t["="]="=",t["!="]="!=",t[">"]=">",t[">="]=">=",t["<"]="<",t["<="]="<=",t.exist="exist",t["!exist"]="!exist",t.contain="contain",t["!contain"]="!contain"})(gu||(gu={}));(function(t){t["="]="=",t.exist="exist",t["!exist"]="!exist"})(yu||(yu={}));(function(t){t["="]="=",t["!="]="!=",t.exist="exist",t["!exist"]="!exist",t.contain="contain",t["!contain"]="!contain"})(bu||(bu={}));(function(t){t["="]="=",t["!="]="!=",t[">"]=">",t[">="]=">=",t["<"]="<",t["<="]="<=",t.exist="exist",t["!exist"]="!exist"})(Eu||(Eu={}));(function(t){t["="]="=",t["!="]="!=",t[">"]=">",t[">="]=">=",t["<"]="<",t["<="]="<=",t.exist="exist",t["!exist"]="!exist"})(_u||(_u={}));(function(t){t.all="all",t.user="user",t.optIn="optIn",t.audienceMatch="audienceMatch"})(xu||(xu={}));(function(t){t.user_id="user_id",t.email="email",t.ip="ip",t.country="country",t.platform="platform",t.platformVersion="platformVersion",t.appVersion="appVersion",t.deviceModel="deviceModel",t.customData="customData"})(wu||(wu={}));(function(t){t.mixpanel="mixpanel",t.csv="csv"})(Su||(Su={}));(function(t){t.string="String",t.boolean="Boolean",t.number="Number",t.semver="Semver"})(Au||(Au={}));(function(t){t.and="and",t.or="or"})(Iu||(Iu={}));(function(t){t.override="override"})(Nu||(Nu={}));Yt=class{type;date;percentage};C([ce(()=>Date),O("design:type",Date)],Yt.prototype,"date",void 0);rt=class{type;startPercentage;startDate;stages};C([ce(()=>Date),O("design:type",Date)],rt.prototype,"startDate",void 0);C([ce(()=>Yt),O("design:type",Array)],rt.prototype,"stages",void 0);Wt=class{_id;_audience;rollout;distribution;type};C([ce(()=>rt),O("design:type",rt)],Wt.prototype,"rollout",void 0);Et=class{_id;prerequisites;winningVariation;forcedUsers;targets};C([ce(()=>Wt),O("design:type",Array)],Et.prototype,"targets",void 0);(function(t){t.api="api",t.dashboard="dashboard"})(Cu||(Cu={}));(function(t){t.release="release",t.experiment="experiment",t.permission="permission",t.ops="ops"})(Ou||(Ou={}));Kt=class{_id;type;key;variations;configuration;settings;tags};C([ce(()=>Et),O("design:type",Et)],Kt.prototype,"configuration",void 0);(function(t){t.api="api",t.dashboard="dashboard",t.clientSDK="clientSDK",t.serverSDK="serverSDK"})(Mu||(Mu={}));(function(t){t.string="String",t.boolean="Boolean",t.number="Number",t.json="JSON"})(tt||(tt={}));Pr=class{project;environment;features;variables;audiences;variableHashes;listAudiences;debugUsers;sse;ably};C([ce(()=>Kt),O("design:type",Array)],Pr.prototype,"features",void 0);he=class{type;target;customType;user_id;date;clientDate;value;featureVars;metaData};C([$(),O("design:type",String)],he.prototype,"type",void 0);C([F(),$(),O("design:type",String)],he.prototype,"target",void 0);C([F(),$(),O("design:type",String)],he.prototype,"customType",void 0);C([$(),ae(),O("design:type",String)],he.prototype,"user_id",void 0);C([Te(),O("design:type",Number)],he.prototype,"date",void 0);C([Te(),O("design:type",Number)],he.prototype,"clientDate",void 0);C([F(),Te(),O("design:type",Number)],he.prototype,"value",void 0);C([ae(),O("design:type",Object)],he.prototype,"featureVars",void 0);C([F(),O("design:type",Object)],he.prototype,"metaData",void 0)});var Ju={};Al(Ju,{DVCPopulatedUser:()=>ze,StoreKey:()=>De,dvcDefaultLogger:()=>Wu,initialize:()=>mp,initializeDevCycle:()=>Ku});async function zr(t){if(!t.ok&&t.status>=400){let e;try{let r=await t.clone().json();e=new Zt(r.message||"Something went wrong")}catch{e=new Zt("Something went wrong")}throw e.status=t.status,e}return t}async function Ld(t,e,r){var n;let i=new AbortController;try{let o=setTimeout(()=>{i.abort()},r),a=await Fd(t,{...e,signal:i.signal});return clearTimeout(o),a}catch(o){throw!((n=i?.signal)===null||n===void 0)&&n.aborted?new Error("Network connection timed out."):o}}async function kd(t,e,r){let[n,i]=await qr(e),o={...i.headers,Authorization:r,"Content-Type":"application/json"},a=await n(t,{...i,headers:o,method:"POST"});return zr(a)}async function Bd(t,e,r){let[n,i]=await qr(e),o={...i.headers,Authorization:r,"Content-Type":"application/json"},a=await n(t,{...i,headers:o,method:"PATCH"});return zr(a)}async function Fd(t,e){let[r,n]=await qr(e),i={...n.headers,"Content-Type":"application/json"},o=await r(t,{...n,headers:i,method:"GET"});return zr(o)}function Ud(){return(0,Hu.default)(fetch)}async function qr(t){if("retries"in t&&t.retries){let r={...t};return r.retryOn=Vd(t.retries),r.retryDelay=zu,[Ud(),r]}return[fetch,t]}function Qd(t,e,r){return{events:r.map(n=>new Br(n,e.user_id,t?.featureVariationMap)),user:e}}function Wu(t){let e=t?.level&&(0,Gu.default)(Ie[t?.level])?Ie[t?.level]:Ie.error,r=t?.logWriter||console.log,n=t?.logWriter||console.error,i=d=>r(Uu+d),o=(d,c)=>n(Uu+d,c),a=d=>{};return{error:Ie.error>=e?o:a,warn:Ie.warn>=e?i:a,info:Ie.info>=e?i:a,debug:Ie.debug>=e?i:a}}function Ku(t,e,r={}){if(!t)throw new Error("Missing SDK key! Call initialize with a valid SDK key");let n=pp(e,r),{options:i}=n;if(typeof window>"u"&&!i.next&&console.warn("Window is not defined, try initializing in a browser context"),typeof window<"u"&&!window.addEventListener&&!i?.reactNative)throw new Error("Window is not defined, try initializing in a browser context. If running on React Native, initialize with the option reactNative: true");if(i?.reactNative&&!globalThis.DeviceInfo)throw new Error("DeviceInfo is not defined. Import react-native-device-info and set global.DeviceInfo when running on React Native");if(!i||i===null)throw new Error("Invalid options! Call initialize with valid options");let o;return n.isDeferred?o=new Xt(t,void 0,n.options):o=new Xt(t,n.user,n.options),o.onClientInitialized().then(()=>o.logger.info("Successfully initialized DevCycle!")).catch(a=>o.logger.error(`Error initializing DevCycle: ${a}`)),o}var Hu,$u,ju,Gu,Zt,zu,Vd,qu,Yu,Hd,$d,jd,Gd,Yr,zd,qd,Yd,Lr,kr,Br,Wd,Kd,_t,Jd,nt,Fr,De,Ur,Hr,Zd,Xd,ep,tp,rp,np,ip,op,ap,sp,up,lp,cp,fp,ze,re,Fu,$r,jr,Uu,Ie,Gr,Xt,dp,pp,mp,Qu=m(()=>{Hu=le(Rn()),$u=le(Si());Pi();ju=le(Di());Bu();Gu=le(Mr()),Zt=class extends Error{constructor(e){super(e),this.name="ResponseError"}},zu=t=>{let e=Math.pow(2,t)*100,r=e*.2*Math.random();return e+r},Vd=t=>(e,r,n)=>e>=t?!1:!(n&&n?.status<500);qu=".devcycle.com",Yu="https://sdk-api"+qu,Hd="https://events"+qu,$d="/v1/sdkConfig",jd="/v1/events",Gd="/v1/edgedb",Yr={retries:5,retryDelay:zu},zd=async(t,e,r,n,i)=>{let o=new URLSearchParams({sdkKey:t});Kd(e,o),n?.enableEdgeDB&&o.append("enableEdgeDB",n.enableEdgeDB.toString()),i?.sse&&(o.append("sse","1"),i.lastModified&&o.append("sseLastModified",i.lastModified.toString()),i.etag&&o.append("sseEtag",i.etag)),n?.enableObfuscation&&o.append("obfuscated","1"),n?.sdkPlatform&&o.append("sdkPlatform",n.sdkPlatform);let a=`${n?.apiProxyURL||Yu}${$d}?`+o.toString();try{return await(await Ld(a,Yr,5e3)).json()}catch(d){throw r.error(`Request to get config failed for url: ${a}, response message: ${d}`),new Error(`Failed to download DevCycle config. Error details: ${d}`)}},qd=async(t,e,r,n,i,o)=>{if(!t)throw new Error("Missing sdkKey to publish events to Events API");let a=Qd(e,r,n);i.info(`Submit Events Payload: ${JSON.stringify(a)}`);let d=`${o?.apiProxyURL||Hd}${jd}`;o?.enableObfuscation&&(d+="?obfuscated=1");let c=await kd(d,{...Yr,body:JSON.stringify(a)},t),f=await c.json();return c.status>=400?i.error(`Error posting events, status: ${c.status}, body: ${f}`):i.info(`Posted Events, status: ${c.status}, body: ${f}`),c},Yd=async(t,e,r,n)=>{if(!e)throw new Error("Missing sdkKey to save to Edge DB!");if(!t||!t.user_id)throw new Error("Missing user to save to Edge DB!");if(t.isAnonymous)throw new Error("Cannot save user data for an anonymous user!");try{return await Bd(`${n?.apiProxyURL||Yu}${Gd}/${encodeURIComponent(t.user_id)}`,{...Yr,body:JSON.stringify(t)},e)}catch(i){let o=i;o.status===403?r.warn("Warning: EdgeDB feature is not enabled for this project"):o.status>=400?r.warn(`Error saving user entity, status: ${o.status}, body: ${o.message}`):r.info(`Saved user entity, status: ${o.status}, body: ${o.message}`);return}},Lr={variableEvaluated:"variableEvaluated",variableDefaulted:"variableDefaulted"},kr=class{constructor(e,r,n){var i,o;this.eventQueueBatchSize=100,this.sdkKey=e,this.client=r,this.eventQueue=[],this.aggregateEventMap={},this.options=n;let a=typeof n.eventFlushIntervalMS=="number"?n.eventFlushIntervalMS:10*1e3;if(a<500)throw new Error(`eventFlushIntervalMS: ${a} must be larger than 500ms`);if(a>60*1e3)throw new Error(`eventFlushIntervalMS: ${a} must be smaller than 1 minute`);if(this.flushInterval=setInterval(this.flushEvents.bind(this),a),this.flushEventQueueSize=(i=n?.flushEventQueueSize)!==null&&i!==void 0?i:100,this.maxEventQueueSize=(o=n?.maxEventQueueSize)!==null&&o!==void 0?o:1e3,this.flushEventQueueSize>=this.maxEventQueueSize)throw new Error(`flushEventQueueSize: ${this.flushEventQueueSize} must be smaller than maxEventQueueSize: ${this.maxEventQueueSize}`);if(this.flushEventQueueSize<10||this.flushEventQueueSize>1e3)throw new Error(`flushEventQueueSize: ${this.flushEventQueueSize} must be between 10 and 1000`);if(this.maxEventQueueSize<100||this.maxEventQueueSize>5e3)throw new Error(`maxEventQueueSize: ${this.maxEventQueueSize} must be between 100 and 5000`)}async flushEvents(){let e=this.client.user;if(!e){this.client.logger.warn("Skipping event flush, user has not been set yet.");return}let r=[...this.eventQueue],n=this.eventsFromAggregateEventMap();if(r.push(...n),!r.length)return;this.client.logger.info(`Flush ${r.length} Events`),this.eventQueue=[],this.aggregateEventMap={};let i=(0,$u.default)(r,this.eventQueueBatchSize);for(let o of i)try{let a=await qd(this.sdkKey,this.client.config||null,e,o,this.client.logger,this.options);a.status===201?this.client.logger.info(`DevCycle Flushed ${o.length} Events.`):a.status>=500||a.status===408?(this.client.logger.warn(`failed to flush events, retrying events. Response status: ${a.status}, message: ${a.statusText}`),this.eventQueue.push(...o)):this.client.logger.error(`failed to flush events, dropping events. Response status: ${a.status}, message: ${a.statusText}`)}catch(a){this.client.eventEmitter.emitError(a),this.client.logger.error(`failed to flush events due to error, dropping events. Error message: ${a?.message}`)}}queueEvent(e){if(this.checkEventQueueSize()){this.client.logger.warn(`DevCycle: Max event queue size (${this.maxEventQueueSize}) reached, dropping event: ${e}`);return}this.eventQueue.push(e)}queueAggregateEvent(e){if(this.checkEventQueueSize()){this.client.logger.warn(`DevCycle: Max event queue size (${this.maxEventQueueSize}) reached, dropping event: ${e}`);return}_t("type",e.type),_t("target",e.target),e.date=Date.now(),e.value=1;let r=this.aggregateEventMap[e.type];r?r[e.target]?r[e.target].value++:r[e.target]=e:this.aggregateEventMap[e.type]={[e.target]:e}}checkEventQueueSize(){let e=Object.values(this.aggregateEventMap).reduce((n,i)=>n+Object.keys(i).length,0),r=this.eventQueue.length+e;return r>=this.flushEventQueueSize&&this.flushEvents(),r>=this.maxEventQueueSize}eventsFromAggregateEventMap(){return Object.values(this.aggregateEventMap).map(e=>Object.values(e)).flat()}async close(){clearInterval(this.flushInterval),await this.flushEvents()}},Br=class{constructor(e,r,n){let{type:i,target:o,date:a,value:d,metaData:c}=e;_t("type",i);let f=!(i in Lr);this.type=f?"customEvent":i,this.customType=f?i:void 0,this.target=o,this.user_id=r,this.clientDate=a||Date.now(),this.value=d,this.featureVars=n||{},this.metaData=c}},Wd=t=>t instanceof Date?t.getTime():typeof t=="object"?JSON.stringify(t):t,Kd=(t,e)=>{for(let r in t){let n=Wd(t[r]);n!=null&&e.append(r,n)}},_t=(t,e)=>{if(!Jd(e))throw new Error(`Missing parameter: ${t}`)},Jd=t=>t!=null,nt=(t,e,r)=>{if(!e)throw new Error(`Missing parameter: ${t}`);if(typeof e!==r)throw new Error(`${t} is not of type ${r}`)};Fr=class{constructor(e){let{key:r,defaultValue:n}=e;nt("key",r,"string"),_t("defaultValue",n),this.key=r.toLowerCase(),e.value===void 0||e.value===null?(this.isDefaulted=!0,this.value=n):(this.value=e.value,this.isDefaulted=!1),this.defaultValue=e.defaultValue,this.evalReason=e.evalReason}onUpdate(e){return nt("callback",e,"function"),this.callback=e,this}},De={User:"dvc:user",AnonUserId:"dvc:anonymous_user_id",AnonymousConfig:"dvc:anonymous_config",IdentifiedConfig:"dvc:identified_config"},Ur=class{constructor(e,r){this.store=e,this.logger=r}getConfigKey(e){return e.isAnonymous?De.AnonymousConfig:De.IdentifiedConfig}getConfigUserIdKey(e){return`${this.getConfigKey(e)}.user_id`}getConfigFetchDateKey(e){return`${this.getConfigKey(e)}.fetch_date`}async loadConfigUserId(e){let r=this.getConfigUserIdKey(e);return this.store.load(r)}async loadConfigFetchDate(e){let r=this.getConfigFetchDateKey(e),n=await this.store.load(r)||"0";return parseInt(n,10)}saveConfig(e,r,n){var i;let o=this.getConfigKey(r),a=this.getConfigFetchDateKey(r),d=this.getConfigUserIdKey(r);this.store.save(o,e),this.store.save(a,n),this.store.save(d,r.user_id),(i=this.logger)===null||i===void 0||i.info("Successfully saved config to local storage")}isBucketedUserConfig(e){return!e||typeof e!="object"?!1:"features"in e&&"project"in e&&"environment"in e&&"featureVariationMap"in e&&"variableVariationMap"in e&&"variables"in e}async loadConfig(e,r=6048e5){var n,i,o,a;let d=await this.loadConfigUserId(e);if(e.user_id!==d)return(n=this.logger)===null||n===void 0||n.debug(`Skipping cached config: no config for user ID ${e.user_id}`),null;let c=await this.loadConfigFetchDate(e);if(Date.now()-c>r)return(i=this.logger)===null||i===void 0||i.debug("Skipping cached config: last fetched date is too old"),null;let s=await this.getConfigKey(e),l=await this.store.load(s);return l==null?((o=this.logger)===null||o===void 0||o.debug("Skipping cached config: no config found"),null):this.isBucketedUserConfig(l)?l:((a=this.logger)===null||a===void 0||a.debug(`Skipping cached config: invalid config found: ${JSON.stringify(l)}`),null)}saveUser(e){var r;if(!e)throw new Error("No user to save");this.store.save(De.User,e),(r=this.logger)===null||r===void 0||r.info("Successfully saved user to local storage")}async loadUser(){return this.store.load(De.User)}saveAnonUserId(e){var r;this.store.save(De.AnonUserId,e),(r=this.logger)===null||r===void 0||r.info("Successfully saved anonymous user id to local storage")}async loadAnonUserId(){return await this.store.load(De.AnonUserId)}removeAnonUserId(){this.store.remove(De.AnonUserId)}},Hr=class{constructor(){this.store=typeof window<"u"?window.localStorage:Zd}save(e,r){this.store.setItem(e,JSON.stringify(r))}load(e){return new Promise(r=>{let n=this.store.getItem(e);r(n?JSON.parse(n):void 0)})}remove(e){this.store.removeItem(e)}},Zd={getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{},key:()=>null,length:0},Xd="@devcycle/js-client-sdk",ep="1.22.5",tp="The Javascript Client SDK for DevCycle",rp="DevCycle <support@devcycle.com>",np=["devcycle","feature flag","javascript","client","sdk"],ip="MIT",op="https://devcycle.com",ap={"<4.0":{"*":["./ts3.5/*"]}},sp="./index.cjs.d.ts",up={"cross-fetch":"^4.0.0"},lp={"@devcycle/types":"^1.10.4","fetch-retry":"^5.0.6",lodash:"^4.17.21","ua-parser-js":"^1.0.36",uuid:"^8.3.2"},cp={type:"git",url:"git://github.com/DevCycleHQ/js-sdks.git"},fp={name:Xd,version:ep,description:tp,author:rp,keywords:np,license:ip,homepage:op,typesVersions:ap,types:sp,devDependencies:up,dependencies:lp,repository:cp},ze=class t{constructor(e,r,n,i,o){var a;if(((a=e.user_id)===null||a===void 0?void 0:a.trim())==="")throw new Error("A User cannot be created with a user_id that is an empty string");this.user_id=e.isAnonymous||!e.user_id?e.user_id||i||yr():e.user_id,this.isAnonymous=e.isAnonymous||!e.user_id,this.email=e.email,this.name=e.name,this.language=e.language,this.country=e.country,this.appVersion=e.appVersion,this.appBuild=e.appBuild,this.customData=e.customData,this.privateCustomData=e.privateCustomData,this.lastSeenDate=new Date;let d=typeof window<"u"?window.navigator.userAgent:o;if(n)Object.assign(this,n);else{let c=new ju.default(d),f=c.getBrowser().name&&`${c.getBrowser().name} ${c.getBrowser().version}`;this.createdDate=new Date,this.platform=r?.reactNative?"ReactNative":"web",this.platformVersion=f??"unknown",this.deviceModel=r?.reactNative&&globalThis.DeviceInfo?globalThis.DeviceInfo.getModel():d??"SSR - unknown",this.sdkType="client",this.sdkVersion=fp.version}}getStaticData(){return{createdDate:this.createdDate,platform:this.platform,platformVersion:this.platformVersion,deviceModel:this.deviceModel,sdkType:this.sdkType,sdkVersion:this.sdkVersion}}updateUser(e,r){if(this.user_id!==e.user_id)throw new Error("Cannot update a user with a different user_id");return new t(e,r,this.getStaticData())}},re={INITIALIZED:"initialized",NEW_VARIABLES:"newVariables",ERROR:"error",VARIABLE_UPDATED:"variableUpdated",FEATURE_UPDATED:"featureUpdated",CONFIG_UPDATED:"configUpdated",VARIABLE_EVALUATED:"variableEvaluated"},Fu=t=>!Object.values(re).includes(t)&&!t.startsWith(re.VARIABLE_UPDATED)&&!t.startsWith(re.FEATURE_UPDATED)&&!t.startsWith(re.NEW_VARIABLES)&&!t.startsWith(re.VARIABLE_EVALUATED),$r=class{constructor(){this.handlers={}}subscribe(e,r){if(nt("key",e,"string"),nt("handler",r,"function"),Fu(e))throw new Error("Not a valid event to subscribe to");this.handlers[e]?this.handlers[e].push(r):this.handlers[e]=[r]}unsubscribe(e,r){if(nt("key",e,"string"),!Fu(e))if(r){let n=this.handlers[e].findIndex(i=>i===r);this.handlers[e].splice(n,1)}else this.handlers[e]=[]}emit(e,...r){var n;nt("key",e,"string"),(n=this.handlers[e])===null||n===void 0||n.forEach(i=>{new Promise(o=>{i(...r),o(!0)})})}emitInitialized(e){this.emit(re.INITIALIZED,e)}emitError(e){this.emit(re.ERROR,e)}emitConfigUpdate(e){this.emit(re.CONFIG_UPDATED,e)}emitVariableEvaluated(e){this.emit(`${re.VARIABLE_EVALUATED}:*`,e.key,e),this.emit(`${re.VARIABLE_EVALUATED}:${e.key}`,e.key,e)}emitVariableUpdates(e,r,n){let i=new Set(Object.keys(e).concat(Object.keys(r))),o=!1;i.forEach(a=>{let d=e[a]&&e[a].value,c=r[a],f=c&&r[a].value;if(JSON.stringify(d)!==JSON.stringify(f)){let s=n[a]&&Object.values(n[a]);s&&(o=!0,s.forEach(u=>{var v;u.value=f??u.defaultValue,u.isDefaulted=f==null,(v=u.callback)===null||v===void 0||v.call(u,u.value)}));let l=c||null;this.emit(`${re.VARIABLE_UPDATED}:*`,a,l),this.emit(`${re.VARIABLE_UPDATED}:${a}`,a,l)}}),o&&this.emit(`${re.NEW_VARIABLES}`)}emitFeatureUpdates(e,r){Object.keys(e).concat(Object.keys(r)).forEach(i=>{let o=e[i]&&e[i]._variation,a=r[i],d=a&&r[i]._variation,c=a||null;o!==d&&(this.emit(`${re.FEATURE_UPDATED}:*`,i,c),this.emit(`${re.FEATURE_UPDATED}:${i}`,i,c))})}},jr=class{constructor(e,r,n){this.requestConfigFunction=e,this.handleConfigReceivedFunction=r,this.nextUser=n,this.resolvers=[],this.requestParams=null}async queue(e,r){e&&(this.nextUser=e),r&&(this.requestParams=r);let n=new Promise((i,o)=>{this.resolvers.push({resolve:i,reject:o})});return this.currentPromise||this.processQueue(),n}async processQueue(){if(!this.resolvers.length)return;let e=this.resolvers.splice(0);await this.performRequest(this.nextUser).then(r=>{this.resolvers.length?this.resolvers.push(...e):(e.forEach(({resolve:n})=>n(r)),this.handleConfigReceivedFunction(r,this.nextUser))}).catch(r=>{e.forEach(({reject:n})=>n(r))}),this.resolvers.length&&this.processQueue()}async performRequest(e){this.currentPromise=this.requestConfigFunction(e,this.requestParams?this.requestParams:void 0),this.requestParams=null;let r=await this.currentPromise;return this.currentPromise=null,r}},Uu="[DevCycle]: ";(function(t){t[t.debug=0]="debug",t[t.info=1]="info",t[t.warn=2]="warn",t[t.error=3]="error"})(Ie||(Ie={}));Gr=class{constructor(e,r,n){this.url=e,this.onMessage=r,this.logger=n,this.openConnection()}openConnection(){if(typeof EventSource>"u"){this.logger.warn("StreamingConnection not opened. EventSource is not available.");return}this.connection=new EventSource(this.url,{withCredentials:!0}),this.connection.onmessage=e=>{this.onMessage(e.data)},this.connection.onerror=()=>{this.logger.warn("StreamingConnection warning. Connection failed to establish.")},this.connection.onopen=()=>{this.logger.debug("StreamingConnection opened")}}isConnected(){var e,r;return((e=this.connection)===null||e===void 0?void 0:e.readyState)===((r=this.connection)===null||r===void 0?void 0:r.OPEN)}reopen(){this.isConnected()||(this.close(),this.openConnection())}close(){var e;(e=this.connection)===null||e===void 0||e.close()}},Xt=class{get isInitialized(){return this._isInitialized}constructor(e,r,n={}){var i;if(this._isInitialized=!1,this.userSaved=!1,this._closing=!1,this.isConfigCached=!1,this.initializeTriggered=!1,this.clientInitialization=async o=>{var a,d;if(this.initializeTriggered||this._closing)return this;this.initializeTriggered=!0;let c=o.user_id?void 0:await this.store.loadAnonUserId();this.user=new ze(o,this.options,void 0,c),this.options.bootstrapConfig||await this.getConfigCache(this.user),this.requestConsolidator=new jr((f,s)=>zd(this.sdkKey,f,this.logger,this.options,s),(f,s)=>this.handleConfigReceived(f,s,Date.now()),this.user);try{this.options.bootstrapConfig?this.handleConfigReceived(this.options.bootstrapConfig,this.user,Date.now()):await this.requestConsolidator.queue(this.user),this.resolveOnInitialized(this),this.logger.info("Client initialized")}catch(f){return this.initializeOnConfigFailure(this.user,f),this}return this.eventEmitter.emitInitialized(!0),this.user.isAnonymous?this.store.saveAnonUserId(this.user.user_id):this.store.removeAnonUserId(),!((d=(a=this.config)===null||a===void 0?void 0:a.sse)===null||d===void 0)&&d.url&&(this.options.disableRealtimeUpdates?this.logger.info("Disabling Realtime Updates based on Initialization parameter"):this.streamingConnection=new Gr(this.config.sse.url,this.onSSEMessage.bind(this),this.logger)),this},this.initializeOnConfigFailure=(o,a)=>{this.isInitialized||(this.eventEmitter.emitInitialized(!1),a&&this.eventEmitter.emitError(a),this.setUser(o),this.resolveOnInitialized(this))},n.sdkPlatform||(n.sdkPlatform="js"),!((i=n.next)===null||i===void 0)&&i.configRefreshHandler&&(this.configRefetchHandler=n.next.configRefreshHandler),this.logger=n.logger||Wu({level:n.logLevel}),this.store=new Ur(n.storage||new Hr,this.logger),this.options=n,this.sdkKey=e,this.variableDefaultMap={},this.eventQueue=new kr(e,this,n),this.eventEmitter=new $r,this.registerVisibilityChangeHandler(),this.onInitialized=new Promise((o,a)=>{this.resolveOnInitialized=d=>{this._isInitialized=!0,o(d)}}),this.options.deferInitialization){if(this.options.bootstrapConfig)throw new Error("bootstrapConfig option can not be combined with deferred initialization!")}else{if(!r)throw new Error("User must be provided to initialize SDK");this.clientInitialization(r)}!n?.reactNative&&typeof window<"u"&&(this.windowMessageHandler=o=>{let a=o.data;a?.type==="DVC.optIn.saved"&&this.refetchConfig(!1)},window.addEventListener("message",this.windowMessageHandler),this.windowPageHideHandler=()=>{this.flushEvents()},window.addEventListener("pagehide",this.windowPageHideHandler))}onClientInitialized(e){if(e&&typeof e=="function"){this.onInitialized.then(()=>e(null,this)).catch(r=>e(r));return}return this.onInitialized}variable(e,r){var n,i;if(r==null)throw new Error("Default value is a required param");let o=Vr(r,e,this.logger,!0),a=typeof r=="string"?r:JSON.stringify(r),d;if(this.variableDefaultMap[e]&&this.variableDefaultMap[e][a])d=this.variableDefaultMap[e][a];else{let c=(i=(n=this.config)===null||n===void 0?void 0:n.variables)===null||i===void 0?void 0:i[e],f={key:e,defaultValue:r};c&&(c.type===o?(f.value=c.value,f.evalReason=c.evalReason):this.logger.warn(`Type mismatch for variable ${e}. Expected ${o}, got ${c.type}`)),d=new Fr(f),this.variableDefaultMap[e]={[a]:d,...this.variableDefaultMap[e]}}return this.trackVariableEvaluated(d),this.eventEmitter.emitVariableEvaluated(d),d}trackVariableEvaluated(e){var r,n;if(!this.options.disableAutomaticEventLogging)try{let i=(n=(r=this.config)===null||r===void 0?void 0:r.variables)===null||n===void 0?void 0:n[e.key];this.eventQueue.queueAggregateEvent({type:e.isDefaulted?Lr.variableDefaulted:Lr.variableEvaluated,target:e.key,metaData:{value:e.value,type:Vr(e.defaultValue,e.key,this.logger),_variable:i?._id}})}catch(i){this.eventEmitter.emitError(i),this.logger.warn(`Error with queueing aggregate events ${i}`)}}variableValue(e,r){return this.variable(e,r).value}identifyUser(e,r){let n=this._identifyUser(e);if(r&&typeof r=="function"){n.then(i=>r(null,i)).catch(i=>r(i,null));return}return n}async _identifyUser(e){var r;let n;if(this.options.deferInitialization&&!this.initializeTriggered)return await this.clientInitialization(e),((r=this.config)===null||r===void 0?void 0:r.variables)||{};this.eventQueue.flushEvents();try{await this.onInitialized;let i=await this.store.loadAnonUserId();this.user&&e.user_id===this.user.user_id?n=this.user.updateUser(e,this.options):n=new ze(e,this.options,void 0,i);let o=await this.requestConsolidator.queue(n);return(e.isAnonymous||!e.user_id)&&this.store.saveAnonUserId(n.user_id),o.variables||{}}catch(i){throw this.eventEmitter.emitError(i),i}}resetUser(e){let r,n=new ze({isAnonymous:!0},this.options),i=new Promise((o,a)=>{this.eventQueue.flushEvents(),this.onInitialized.then(()=>this.store.loadAnonUserId()).then(d=>{this.store.removeAnonUserId(),r=d}).then(()=>this.requestConsolidator.queue(n)).then(d=>{this.store.saveAnonUserId(n.user_id),o(d.variables||{})}).catch(d=>{this.eventEmitter.emitError(d),r&&this.store.saveAnonUserId(r),a(d)})});if(e&&typeof e=="function"){i.then(o=>e(null,o)).catch(o=>e(o,null));return}return i}allFeatures(){var e;return((e=this.config)===null||e===void 0?void 0:e.features)||{}}allVariables(){var e;return((e=this.config)===null||e===void 0?void 0:e.variables)||{}}subscribe(e,r){this.eventEmitter.subscribe(e,r)}unsubscribe(e,r){this.eventEmitter.unsubscribe(e,r)}track(e){if(this._closing){this.logger.error("Client is closing, cannot track new events.");return}this.options.disableCustomEventLogging||(_t("type",e.type),this.onInitialized.then(()=>{this.eventQueue.queueEvent(e)}))}flushEvents(e){return this.eventQueue.flushEvents().then(()=>e?.())}async close(){var e;this.logger.debug("Closing client"),this._closing=!0,document&&this.pageVisibilityHandler&&document.removeEventListener("visibilitychange",this.pageVisibilityHandler),this.windowMessageHandler&&window.removeEventListener("message",this.windowMessageHandler),this.windowPageHideHandler&&window.removeEventListener("pagehide",this.windowPageHideHandler),(e=this.streamingConnection)===null||e===void 0||e.close(),await this.eventQueue.close()}get closing(){return this._closing}synchronizeBootstrapData(e,r,n){let i=new ze(r,this.options,void 0,void 0,n);if(!e){this.initializeOnConfigFailure(i);return}if(this.options.bootstrapConfig=e,this.options.deferInitialization&&!this.initializeTriggered){this.clientInitialization(r);return}this.handleConfigReceived(e,i,Date.now())}async refetchConfig(e,r,n){await this.onInitialized,this.configRefetchHandler?this.configRefetchHandler(r):await this.requestConsolidator.queue(null,{sse:e,lastModified:r,etag:n})}handleConfigReceived(e,r,n){let i=this.config;this.config=e,this.store.saveConfig(e,r,n),this.isConfigCached=!1,this.setUser(r);let o=i?.features||{},a=i?.variables||{};this.eventEmitter.emitFeatureUpdates(o,e.features),this.eventEmitter.emitVariableUpdates(a,e.variables,this.variableDefaultMap),(!i||i.etag!==this.config.etag)&&this.eventEmitter.emitConfigUpdate(e.variables)}setUser(e){var r;(this.user!=e||!this.userSaved)&&(this.user=e,this.store.saveUser(e),!this.user.isAnonymous&&dp(this.logger,this.config,(r=this.options)===null||r===void 0?void 0:r.enableEdgeDB,!0)&&Yd(this.user,this.sdkKey,this.logger,this.options).then(n=>this.logger.info(`Saved response entity! ${n}`)),this.userSaved=!0)}onSSEMessage(e){var r,n;try{let i=JSON.parse(e),o=JSON.parse(i.data);if(!o)return;(!o.type||o.type==="refetchConfig")&&(!(!((r=this.config)===null||r===void 0)&&r.etag)||o.etag!==((n=this.config)===null||n===void 0?void 0:n.etag))&&this.refetchConfig(!0,o.lastModified,o.etag).catch(a=>{this.logger.warn(`Failed to refetch config ${a}`)})}catch(i){this.logger.warn(`Streaming Connection: Unparseable message ${i}`)}}registerVisibilityChangeHandler(){var e,r,n;if(typeof document>"u")return;let i=((r=(e=this.config)===null||e===void 0?void 0:e.sse)===null||r===void 0?void 0:r.inactivityDelay)||12e4;this.pageVisibilityHandler=()=>{var o,a,d;if(!((o=this.config)===null||o===void 0)&&o.sse)document.visibilityState==="visible"?(!((a=this.streamingConnection)===null||a===void 0)&&a.isConnected()||(this.logger.debug("Page became visible, refetching config"),this.refetchConfig(!1).catch(c=>{this.logger.warn(`Failed to refetch config ${c}`)}),(d=this.streamingConnection)===null||d===void 0||d.reopen()),window?.clearTimeout(this.inactivityHandlerId)):(window?.clearTimeout(this.inactivityHandlerId),this.inactivityHandlerId=window?.setTimeout(()=>{var c;this.logger.debug("Page is not visible, closing streaming connection"),(c=this.streamingConnection)===null||c===void 0||c.close()},i));else return},(n=document.addEventListener)===null||n===void 0||n.call(document,"visibilitychange",this.pageVisibilityHandler)}async getConfigCache(e){if(this.options.disableConfigCache){this.logger.info("Skipping config cache");return}let r=await this.store.loadConfig(e,this.options.configCacheTTL);r&&(this.config=r,this.isConfigCached=!0,this.eventEmitter.emitFeatureUpdates({},r.features),this.eventEmitter.emitVariableUpdates({},r.variables,this.variableDefaultMap),this.logger.debug("Initialized with a cached config"))}},dp=(t,e,r,n=!1)=>{var i,o,a;return!((a=(o=(i=e?.project)===null||i===void 0?void 0:i.settings)===null||o===void 0?void 0:o.edgeDB)===null||a===void 0)&&a.enabled?!!r:(r&&n&&t.warn("EdgeDB is not enabled for this project. Only using local user data."),!1)},pp=(t,e={})=>{let r;if(t&&"deferInitialization"in t){if(t.deferInitialization)return{user:void 0,options:t,isDeferred:!0}}else r=t;if(!r)throw new Error("Missing user! Call initialize with a valid user");return{user:r,options:e,isDeferred:!1}};mp=Ku});var Zu=k(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});var fe=Mn(),hp=(Qu(),Il(Ju)),vp={email:"string",name:"string",language:"string",country:"string",appVersion:"string",appBuild:"number",customData:"object",privateCustomData:"object"},Wr=class{get devcycleClient(){return this._devcycleClient}constructor(e,r={}){this.metadata={name:"devcycle-web-provider"},this.runsOn="client",this.events=new fe.OpenFeatureEventEmitter,this._devcycleClient=null,this.sdkKey=e,r.sdkPlatform||(r.sdkPlatform="js-of"),this.options=r}async initialize(e){this._devcycleClient=await(0,hp.initializeDevCycle)(this.sdkKey,e?this.dvcUserFromContext(e):{},this.options).onClientInitialized(),this._devcycleClient.eventEmitter.subscribe("configUpdated",r=>{this.events.emit(fe.ProviderEvents.ConfigurationChanged,r)}),this._devcycleClient.eventEmitter.subscribe("error",r=>{this.events.emit(fe.ProviderEvents.Error,r)}),e||this._devcycleClient.logger.warn("DevCycle initialized without context being set. It is highly recommended to set a context `OpenFeature.setContext()` before setting an OpenFeature Provider `OpenFeature.setProvider()` to avoid multiple API fetch calls.")}get status(){var e;return!((e=this._devcycleClient)===null||e===void 0)&&e.isInitialized?fe.ProviderStatus.READY:fe.ProviderStatus.NOT_READY}async onClose(){var e;await((e=this._devcycleClient)===null||e===void 0?void 0:e.close())}async onContextChange(e,r){var n;await((n=this._devcycleClient)===null||n===void 0?void 0:n.identifyUser(this.dvcUserFromContext(r)))}getDVCVariable(e,r,n){var i;let o=(i=this._devcycleClient)===null||i===void 0?void 0:i.variable(e,r);return this.resultFromDVCVariable(o,n)}resolveBooleanEvaluation(e,r){return this.getDVCVariable(e,r,r)}resolveStringEvaluation(e,r){return this.getDVCVariable(e,r,r)}resolveNumberEvaluation(e,r){return this.getDVCVariable(e,r,r)}resolveObjectEvaluation(e,r){return this.getDVCVariable(e,this.defaultValueFromJsonValue(r),r)}defaultValueFromJsonValue(e){if(typeof e!="object"||Array.isArray(e))throw new fe.ParseError("DevCycle only supports object values for JSON flags");if(!e)throw new fe.ParseError("DevCycle does not support null default values for JSON flags");return e}resultFromDVCVariable(e,r){return e?{value:e.value,reason:e.isDefaulted?fe.StandardResolutionReasons.DEFAULT:fe.StandardResolutionReasons.TARGETING_MATCH}:{value:r,reason:fe.StandardResolutionReasons.DEFAULT}}dvcUserFromContext(e){var r,n,i,o;let a=(r=e.targetingKey)!==null&&r!==void 0?r:e.user_id;if(!a)throw new fe.TargetingKeyMissingError("Missing targetingKey or user_id in context");if(typeof a!="string")throw new fe.InvalidContextError("targetingKey or user_id must be a string");let d={},c={},f={};for(let[s,l]of Object.entries(e)){if(s==="targetingKey"||s==="user_id")continue;let u=vp[s];if(u){if(typeof l!==u){(n=this._devcycleClient)===null||n===void 0||n.logger.warn(`Expected DevCycleUser property "${s}" to be "${u}" but got "${typeof l}" in EvaluationContext. Ignoring value.`);continue}switch(u){case"string":d[s]=l;break;case"number":d[s]=l;break;case"object":s==="privateCustomData"?f=this.convertToDVCCustomDataJSON(l):s==="customData"&&(c={...c,...this.convertToDVCCustomDataJSON(l)});break;default:break}}else switch(typeof l){case"string":c[s]=l;break;case"number":c[s]=l;break;case"boolean":c[s]=l;break;case"object":if(l===null){c[s]=null;break}(i=this._devcycleClient)===null||i===void 0||i.logger.warn(`EvaluationContext property "${s}" is an ${Array.isArray(l)?"Array":"Object"}. DevCycleUser only supports flat customData properties of type string / number / boolean / null`);break;default:(o=this._devcycleClient)===null||o===void 0||o.logger.warn(`Unknown EvaluationContext property "${s}" type. DevCycleUser only supports flat customData properties of type string / number / boolean / null`);break}}return{user_id:a,customData:Object.keys(c).length?c:void 0,privateCustomData:Object.keys(f).length?f:void 0,...d}}convertToDVCCustomDataJSON(e){var r;let n={};for(let[i,o]of Object.entries(e))switch(typeof o){case"string":n[i]=o;break;case"number":n[i]=o;break;case"boolean":n[i]=o;break;case"undefined":n[i]=null;break;default:(r=this._devcycleClient)===null||r===void 0||r.logger.warn(`EvaluationContext property "customData" contains "${i}" property of type ${typeof o}.DevCycleUser only supports flat customData properties of type string / number / boolean / null`);break}return n}};Kr.default=Wr});var Xu=k(xt=>{"use strict";var gp=xt&&xt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});var yp=gp(Zu());xt.default=yp.default});var yl=le(Xu());var St=class tl extends Error{constructor(e,r){super(e,r),Object.setPrototypeOf(this,tl.prototype),this.name="OpenFeatureError"}},Jr={TARGETING_MATCH:"TARGETING_MATCH",SPLIT:"SPLIT",DISABLED:"DISABLED",DEFAULT:"DEFAULT",UNKNOWN:"UNKNOWN",STATIC:"STATIC",CACHED:"CACHED",ERROR:"ERROR"},tr=(t=>(t.PROVIDER_NOT_READY="PROVIDER_NOT_READY",t.PROVIDER_FATAL="PROVIDER_FATAL",t.FLAG_NOT_FOUND="FLAG_NOT_FOUND",t.PARSE_ERROR="PARSE_ERROR",t.TYPE_MISMATCH="TYPE_MISMATCH",t.TARGETING_KEY_MISSING="TARGETING_KEY_MISSING",t.INVALID_CONTEXT="INVALID_CONTEXT",t.GENERAL="GENERAL",t))(tr||{}),rl=class nl extends St{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,nl.prototype),this.name="GeneralError",this.code="GENERAL"}};var il=class ol extends St{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,ol.prototype),this.name="ProviderNotReadyError",this.code="PROVIDER_NOT_READY"}},al=class sl extends St{code;constructor(e,r){super(e,r),Object.setPrototypeOf(this,sl.prototype),this.name="ProviderFatalError",this.code="PROVIDER_FATAL"}};var it=(t=>(t.NOT_READY="NOT_READY",t.READY="READY",t.ERROR="ERROR",t.STALE="STALE",t.FATAL="FATAL",t.RECONCILING="RECONCILING",t))(it||{});var ve=(t=>(t.Ready="PROVIDER_READY",t.Error="PROVIDER_ERROR",t.ConfigurationChanged="PROVIDER_CONFIGURATION_CHANGED",t.ContextChanged="PROVIDER_CONTEXT_CHANGED",t.Reconciling="PROVIDER_RECONCILING",t.Stale="PROVIDER_STALE",t))(ve||{}),bp={READY:"PROVIDER_READY",ERROR:"PROVIDER_ERROR",FATAL:"PROVIDER_ERROR",STALE:"PROVIDER_STALE",RECONCILING:"PROVIDER_RECONCILING",NOT_READY:void 0},Qr=(t,e)=>!e&&t==="PROVIDER_READY"||bp[e]===t,ul=class{error(...t){console.error(...t)}warn(...t){console.warn(...t)}info(){}debug(){}},Ep=["error","warn","info","debug"],rr=class{logger;fallbackLogger=new ul;constructor(t){try{for(let e of Ep)if(!t[e]||typeof t[e]!="function")throw new Error(`The provided logger is missing the ${e} method.`);this.logger=t}catch(e){console.error(e),console.error("Falling back to the default logger."),this.logger=this.fallbackLogger}}error(...t){this.log("error",...t)}warn(...t){this.log("warn",...t)}info(...t){this.log("info",...t)}debug(...t){this.log("debug",...t)}log(t,...e){try{this.logger[t](...e)}catch{this.fallbackLogger[t](...e)}}},ll=class{constructor(t){this.globalLogger=t}_handlers={PROVIDER_CONFIGURATION_CHANGED:new WeakMap,PROVIDER_CONTEXT_CHANGED:new WeakMap,PROVIDER_READY:new WeakMap,PROVIDER_ERROR:new WeakMap,PROVIDER_STALE:new WeakMap,PROVIDER_RECONCILING:new WeakMap};_eventLogger;emit(t,e){this.eventEmitter.emit(t,e)}addHandler(t,e){let r=async i=>{try{await e(i)}catch(o){this._logger?.error("Error running event handler:",o)}},n=this._handlers[t].get(e);this._handlers[t].set(e,[...n||[],r]),this.eventEmitter.on(t,r)}removeHandler(t,e){let r=this._handlers[t].get(e);if(r){let n=r.pop();n&&this.eventEmitter.removeListener(t,n)}}removeAllHandlers(t){t?this.eventEmitter.removeAllListeners(t):this.eventEmitter.removeAllListeners()}getHandlers(t){return this.eventEmitter.listeners(t)}setLogger(t){return this._eventLogger=new rr(t),this}get _logger(){return this._eventLogger??this.globalLogger?.()}};function _p(t){return typeof t=="string"}function At(t){return _p(t)?t:void 0}function xp(t){return typeof t=="object"}function wt(t){return xp(t)?t:void 0}function el(t){return typeof t<"u"&&t!==null}var er=class{constructor(t,e,r){this._provider=t,this._status=e,t.events?.addHandler("PROVIDER_READY",()=>{this._status=r.READY}),t.events?.addHandler("PROVIDER_STALE",()=>{this._status=r.STALE}),t.events?.addHandler("PROVIDER_ERROR",n=>{n?.errorCode==="PROVIDER_FATAL"?this._status=r.FATAL:this._status=r.ERROR})}_pendingContextChanges=0;get provider(){return this._provider}set provider(t){this._provider=t}get status(){return this._status}set status(t){this._status=t}get allContextChangesSettled(){return this._pendingContextChanges===0}incrementPendingContextChanges(){this._pendingContextChanges++}decrementPendingContextChanges(){this._pendingContextChanges--}},cl=class{_hooks=[];_context={};_logger=new ul;_clientEventHandlers=new Map;_domainScopedContext=new Map;_clientEvents=new Map;_runsOn;constructor(t){this._runsOn=t}addHooks(...t){return this._hooks=[...this._hooks,...t],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}setLogger(t){return this._logger=new rr(t),this}get providerMetadata(){return this.getProviderMetadata()}getProviderMetadata(t){return this.getProviderForClient(t).metadata}addHandler(t,e){[...new Map([[void 0,this._defaultProvider]]),...this._domainScopedProviders].forEach(r=>{let n=r[0],i=r[1].provider,o=r[1].status;if(Qr(t,o))try{e({domain:n,providerName:i.metadata.name})}catch(d){this._logger?.error("Error running event handler:",d)}}),this._apiEmitter.addHandler(t,e)}removeHandler(t,e){this._apiEmitter.removeHandler(t,e)}clearHandlers(){this._apiEmitter.removeAllHandlers()}getHandlers(t){return this._apiEmitter.getHandlers(t)}async setProviderAndWait(t,e){await this.setAwaitableProvider(t,e)}setProvider(t,e){let r=this.setAwaitableProvider(t,e);return r&&r.catch(()=>{}),this}setAwaitableProvider(t,e){let r=At(t),n=wt(t)??wt(e);if(!n){this._logger.debug("No provider defined, ignoring setProvider call");return}let i=this.getProviderForClient(r),o=n.metadata.name;if(i===n){this._logger.debug("Provider is already set, ignoring setProvider call");return}if(!n.runsOn)this._logger.debug(`Provider '${n.metadata.name}' has not defined its intended use.`);else if(n.runsOn!==this._runsOn)throw new rl(`Provider '${n.metadata.name}' is intended for use on the ${n.runsOn}.`);let a=this.getAssociatedEventEmitters(r),d,c=new er(n,this._statusEnumType.NOT_READY,this._statusEnumType);return typeof n.initialize=="function"&&!this.allProviders.includes(n)?d=n.initialize?.(r?this._domainScopedContext.get(r)??this._context:this._context)?.then(()=>{c.status=this._statusEnumType.READY,this.getAssociatedEventEmitters(r).forEach(f=>{f?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})}),this._apiEmitter?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})})?.catch(f=>{throw f?.code==="PROVIDER_FATAL"?c.status=this._statusEnumType.FATAL:c.status=this._statusEnumType.ERROR,this.getAssociatedEventEmitters(r).forEach(s=>{s?.emit("PROVIDER_ERROR",{clientName:r,domain:r,providerName:o,message:f?.message})}),this._apiEmitter?.emit("PROVIDER_ERROR",{clientName:r,domain:r,providerName:o,message:f?.message}),f}):(c.status=this._statusEnumType.READY,a.forEach(f=>{f?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})}),this._apiEmitter?.emit("PROVIDER_READY",{clientName:r,domain:r,providerName:o})),r?this._domainScopedProviders.set(r,c):this._defaultProvider=c,this.transferListeners(i,n,r,a),this.allProviders.includes(i)||i?.onClose?.()?.catch(f=>{this._logger.error(`error closing provider: ${f?.message}, ${f?.stack}`)}),d}getProviderForClient(t){return t?this._domainScopedProviders.get(t)?.provider??this._defaultProvider.provider:this._defaultProvider.provider}buildAndCacheEventEmitterForClient(t){let e=this._clientEvents.get(t);if(e)return e;let r=this._createEventEmitter();this._clientEvents.set(t,r);let n=this.getProviderForClient(t);return Object.values(ve).forEach(i=>n.events?.addHandler(i,async o=>{r.emit(i,{...o,clientName:t,domain:t,providerName:n.metadata.name})})),r}getUnboundEmitters(){let t=[...this._domainScopedProviders.keys()];return[...[...this._clientEvents.keys()].filter(el).filter(n=>!t.includes(n)).map(n=>this._clientEvents.get(n)),this._clientEvents.get(void 0)].filter(el)}getAssociatedEventEmitters(t){return t?[this.buildAndCacheEventEmitterForClient(t)]:this.getUnboundEmitters()}transferListeners(t,e,r,n){this._clientEventHandlers.get(r)?.forEach(o=>t.events?.removeHandler(...o));let i=Object.values(ve).map(o=>[o,async d=>{n.forEach(c=>{c?.emit(o,{...d,clientName:r,domain:r,providerName:e.metadata.name})}),this._apiEmitter.emit(o,{...d,clientName:r,domain:r,providerName:e.metadata.name})}]);this._clientEventHandlers.set(r,i),i.forEach(o=>e.events?.addHandler(...o))}async close(){try{await this?._defaultProvider.provider?.onClose?.()}catch(e){this.handleShutdownError(this._defaultProvider.provider,e)}let t=Array.from(this._domainScopedProviders);await Promise.all(t.map(async([,e])=>{try{await e?.provider.onClose?.()}catch(r){this.handleShutdownError(e?.provider,r)}}))}async clearProvidersAndSetDefault(t){try{await this.close()}catch{this._logger.error("Unable to cleanly close providers. Resetting to the default configuration.")}finally{this._domainScopedProviders.clear(),this._defaultProvider=new er(t,this._statusEnumType.NOT_READY,this._statusEnumType)}}get allProviders(){return[...[...this._domainScopedProviders.values()].map(t=>t.provider),this._defaultProvider.provider]}handleShutdownError(t,e){this._logger.error(`Error during shutdown of provider ${t.metadata.name}: ${e}`),this._logger.error(e?.stack)}};var wp=Object.create,hl=Object.defineProperty,Sp=Object.getOwnPropertyDescriptor,vl=Object.getOwnPropertyNames,Ap=Object.getPrototypeOf,Ip=Object.prototype.hasOwnProperty,Np=(t,e)=>function(){return e||(0,t[vl(t)[0]])((e={exports:{}}).exports,e),e.exports},Cp=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vl(e))!Ip.call(t,i)&&i!==r&&hl(t,i,{get:()=>e[i],enumerable:!(n=Sp(e,i))||n.enumerable});return t},Op=(t,e,r)=>(r=t!=null?wp(Ap(t)):{},Cp(e||!t||!t.__esModule?hl(r,"default",{value:t,enumerable:!0}):r,t)),Mp=Np({"../../node_modules/eventemitter3/index.js"(t,e){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(f,s,l){this.fn=f,this.context=s,this.once=l||!1}function a(f,s,l,u,v){if(typeof l!="function")throw new TypeError("The listener must be a function");var y=new o(l,u||f,v),S=n?n+s:s;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],y]:f._events[S].push(y):(f._events[S]=y,f._eventsCount++),f}function d(f,s){--f._eventsCount===0?f._events=new i:delete f._events[s]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var s=[],l,u;if(this._eventsCount===0)return s;for(u in l=this._events)r.call(l,u)&&s.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(l)):s},c.prototype.listeners=function(s){var l=n?n+s:s,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var v=0,y=u.length,S=new Array(y);v<y;v++)S[v]=u[v].fn;return S},c.prototype.listenerCount=function(s){var l=n?n+s:s,u=this._events[l];return u?u.fn?1:u.length:0},c.prototype.emit=function(s,l,u,v,y,S){var A=n?n+s:s;if(!this._events[A])return!1;var g=this._events[A],E=arguments.length,N,_;if(g.fn){switch(g.once&&this.removeListener(s,g.fn,void 0,!0),E){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,l),!0;case 3:return g.fn.call(g.context,l,u),!0;case 4:return g.fn.call(g.context,l,u,v),!0;case 5:return g.fn.call(g.context,l,u,v,y),!0;case 6:return g.fn.call(g.context,l,u,v,y,S),!0}for(_=1,N=new Array(E-1);_<E;_++)N[_-1]=arguments[_];g.fn.apply(g.context,N)}else{var M=g.length,V;for(_=0;_<M;_++)switch(g[_].once&&this.removeListener(s,g[_].fn,void 0,!0),E){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,l);break;case 3:g[_].fn.call(g[_].context,l,u);break;case 4:g[_].fn.call(g[_].context,l,u,v);break;default:if(!N)for(V=1,N=new Array(E-1);V<E;V++)N[V-1]=arguments[V];g[_].fn.apply(g[_].context,N)}}return!0},c.prototype.on=function(s,l,u){return a(this,s,l,u,!1)},c.prototype.once=function(s,l,u){return a(this,s,l,u,!0)},c.prototype.removeListener=function(s,l,u,v){var y=n?n+s:s;if(!this._events[y])return this;if(!l)return d(this,y),this;var S=this._events[y];if(S.fn)S.fn===l&&(!v||S.once)&&(!u||S.context===u)&&d(this,y);else{for(var A=0,g=[],E=S.length;A<E;A++)(S[A].fn!==l||v&&!S[A].once||u&&S[A].context!==u)&&g.push(S[A]);g.length?this._events[y]=g.length===1?g[0]:g:d(this,y)}return this},c.prototype.removeAllListeners=function(s){var l;return s?(l=n?n+s:s,this._events[l]&&d(this,l)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof e<"u"&&(e.exports=c)}}),Rp=Op(Mp(),1),fl=class extends ll{eventEmitter=new Rp.default;constructor(){super()}},Tp="No-op",Pp=class{metadata={name:"No-op Provider"};resolveBooleanEvaluation(t,e){return this.noOp(e)}resolveStringEvaluation(t,e){return this.noOp(e)}resolveNumberEvaluation(t,e){return this.noOp(e)}resolveObjectEvaluation(t,e){return this.noOp(e)}noOp(t){return{value:t,reason:Tp}}},dl=new Pp;var pl=Symbol.for("@openfeature/web-sdk/api"),ml=globalThis,Dp=class gl extends cl{_statusEnumType=it;_apiEmitter=new fl;_defaultProvider=new er(dl,it.NOT_READY,this._statusEnumType);_domainScopedProviders=new Map;_createEventEmitter=()=>new fl;constructor(){super("client")}static getInstance(){let e=ml[pl];if(e)return e;let r=new gl;return ml[pl]=r,r}getProviderStatus(e){return e?this._domainScopedProviders.get(e)?.status??this._defaultProvider.status:this._defaultProvider.status}async setContext(e,r){let n=At(e),i=wt(e)??wt(r)??{};if(n){let o=this._domainScopedProviders.get(n);if(o){let a=this.getContext(n);this._domainScopedContext.set(n,i),await this.runProviderContextChangeHandler(n,o,a,i)}else this._domainScopedContext.set(n,i)}else{let o=this._context;this._context=i;let a=Array.from(this._domainScopedProviders.entries()).filter(([c])=>!this._domainScopedContext.has(c)).reduce((c,[f,s])=>(c.push({domain:f,wrapper:s}),c),[]),d=[{domain:void 0,wrapper:this._defaultProvider},...a];await Promise.all(d.map(c=>this.runProviderContextChangeHandler(c.domain,c.wrapper,o,i)))}}getContext(e){let r=At(e);if(r){let n=this._domainScopedContext.get(r);if(n)return n;this._logger.debug(`Unable to find context for '${r}'.`)}return this._context}async clearContext(e){let r=At(e);if(r){let n=this._domainScopedProviders.get(r);if(n){let i=this.getContext(r);this._domainScopedContext.delete(r);let o=this.getContext();await this.runProviderContextChangeHandler(r,n,i,o)}else this._domainScopedContext.delete(r)}else return this.setContext({})}async clearContexts(){await this.clearContext(),await Promise.allSettled(Array.from(this._domainScopedProviders.keys()).map(e=>this.clearContext(e)))}getClient(e,r){return new Vp(()=>this.getProviderForClient(e),()=>this.getProviderStatus(e),()=>this.buildAndCacheEventEmitterForClient(e),()=>this._logger,{domain:e,version:r})}async clearProviders(){await super.clearProvidersAndSetDefault(dl),this._domainScopedContext.clear()}async runProviderContextChangeHandler(e,r,n,i){let o=r.provider?.metadata?.name||"unnamed-provider";try{typeof r.provider.onContextChange=="function"&&(r.incrementPendingContextChanges(),r.status=this._statusEnumType.RECONCILING,this.getAssociatedEventEmitters(e).forEach(a=>{a?.emit(ve.Reconciling,{domain:e,providerName:o})}),this._apiEmitter?.emit(ve.Reconciling,{domain:e,providerName:o}),await r.provider.onContextChange(n,i),r.decrementPendingContextChanges()),r.status=this._statusEnumType.READY,r.allContextChangesSettled&&(this.getAssociatedEventEmitters(e).forEach(a=>{a?.emit(ve.ContextChanged,{clientName:e,domain:e,providerName:o})}),this._apiEmitter?.emit(ve.ContextChanged,{clientName:e,domain:e,providerName:o}))}catch(a){if(r.decrementPendingContextChanges(),r.status=this._statusEnumType.ERROR,r.allContextChangesSettled){let c=`Error running ${o}'s context change handler: ${a?.message}`;this._logger?.error(`${c}`,a),this.getAssociatedEventEmitters(e).forEach(f=>{f?.emit(ve.Error,{clientName:e,domain:e,providerName:o,message:c})}),this._apiEmitter?.emit(ve.Error,{clientName:e,domain:e,providerName:o,message:c})}}}},qe=Dp.getInstance(),Vp=class{constructor(t,e,r,n,i){this.providerAccessor=t,this.providerStatusAccessor=e,this.emitterAccessor=r,this.globalLogger=n,this.options=i}_hooks=[];_clientLogger;get metadata(){return{name:this.options.domain??this.options.name,domain:this.options.domain??this.options.name,version:this.options.version,providerMetadata:this.providerAccessor().metadata}}get providerStatus(){return this.providerStatusAccessor()}addHandler(t,e){if(this.emitterAccessor().addHandler(t,e),Qr(t,this.providerStatus))try{e({clientName:this.metadata.name,domain:this.metadata.domain,providerName:this._provider.metadata.name})}catch(n){this._logger?.error("Error running event handler:",n)}}removeHandler(t,e){this.emitterAccessor().removeHandler(t,e)}getHandlers(t){return this.emitterAccessor().getHandlers(t)}setLogger(t){return this._clientLogger=new rr(t),this}addHooks(...t){return this._hooks=[...this._hooks,...t],this}getHooks(){return this._hooks}clearHooks(){return this._hooks=[],this}getBooleanValue(t,e,r){return this.getBooleanDetails(t,e,r).value}getBooleanDetails(t,e,r){return this.evaluate(t,this._provider.resolveBooleanEvaluation,e,"boolean",r)}getStringValue(t,e,r){return this.getStringDetails(t,e,r).value}getStringDetails(t,e,r){return this.evaluate(t,this._provider.resolveStringEvaluation,e,"string",r)}getNumberValue(t,e,r){return this.getNumberDetails(t,e,r).value}getNumberDetails(t,e,r){return this.evaluate(t,this._provider.resolveNumberEvaluation,e,"number",r)}getObjectValue(t,e,r){return this.getObjectDetails(t,e,r).value}getObjectDetails(t,e,r){return this.evaluate(t,this._provider.resolveObjectEvaluation,e,"object",r)}evaluate(t,e,r,n,i={}){let o=[...qe.getHooks(),...this.getHooks(),...i.hooks||[],...this._provider.hooks||[]],a=[...o].reverse(),d={...qe.getContext(this?.options?.domain)},c={flagKey:t,defaultValue:r,flagValueType:n,clientMetadata:this.metadata,providerMetadata:qe.providerMetadata,context:d,logger:this._logger};try{if(this.beforeHooks(o,c,i),this.providerStatus===it.NOT_READY)throw new il("provider has not yet initialized");if(this.providerStatus===it.FATAL)throw new al("provider is in an irrecoverable error state");let f=e.call(this._provider,t,r,d,this._logger),s={...f,flagMetadata:Object.freeze(f.flagMetadata??{}),flagKey:t};return this.afterHooks(a,c,s,i),s}catch(f){let s=f?.message,l=f?.code||tr.GENERAL;return this.errorHooks(a,c,f,i),{errorCode:l,errorMessage:s,value:r,reason:Jr.ERROR,flagMetadata:Object.freeze({}),flagKey:t}}finally{this.finallyHooks(a,c,i)}}beforeHooks(t,e,r){Object.freeze(e),Object.freeze(e.context);for(let n of t)n?.before?.(e,Object.freeze(r.hookHints))}afterHooks(t,e,r,n){for(let i of t)i?.after?.(e,r,n.hookHints)}errorHooks(t,e,r,n){for(let i of t)try{i?.error?.(e,r,n.hookHints)}catch(o){this._logger.error(`Unhandled error during 'error' hook: ${o}`),o instanceof Error&&this._logger.error(o.stack),this._logger.error(o?.stack)}}finallyHooks(t,e,r){for(let n of t)try{n?.finally?.(e,r.hookHints)}catch(i){this._logger.error(`Unhandled error during 'finally' hook: ${i}`),i instanceof Error&&this._logger.error(i.stack),this._logger.error(i?.stack)}}get _provider(){return this.providerAccessor()}get _logger(){return this._clientLogger||this.globalLogger()}};function bl(t){t.store("openfeature",{client:null}),t.directive("openfeature",(e,{value:r,modifiers:n,expression:i},{Alpine:o,effect:a,evaluate:d,cleanup:c})=>{f().then(()=>{o.store("openfeature",{client:openFeatureClient})});async function f(){let s={user_id:"user_id",customData:{browser:navigator.userAgentData?.brands?.[0]?.brand??"Unknown",language:navigator.language??"Unknown",os:navigator.userAgentData?.platform??"Unknown",mobile:navigator.userAgentData?.mobile??!1}};console.log("User: ",s);let l=new yl.default(`${i}`);await qe.setContext(s),await qe.setProviderAndWait(l),openFeatureClient=qe.getClient()}}),t.magic("booleanFlag",(e,{Alpine:r})=>(n,i=!1)=>{let o=i;try{let a=JSON.parse(localStorage.getItem("dvc:identified_config"));a&&a.variables&&a.variables[n]&&a.variables[n].type==="Boolean"&&(o=a.variables[n].value)}catch(a){console.error("Error parsing localStorage data:",a)}return r.store("openfeature").client?r.store("openfeature").client.getBooleanValue(n,i):o}),t.magic("stringFlag",(e,{Alpine:r})=>(n,i)=>{let o=i;try{let a=JSON.parse(localStorage.getItem("dvc:identified_config"));a&&a.variables&&a.variables[n]&&a.variables[n].type==="String"&&(o=a.variables[n].value)}catch(a){console.error("Error parsing localStorage data:",a)}return r.store("openfeature").client?r.store("openfeature").client.getStringValue(n,i):o})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(bl));})();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
